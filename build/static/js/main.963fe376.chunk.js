(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{111:function(e,n,t){e.exports=t.p+"static/media/user.e6560136.png"},123:function(e,n,t){e.exports=t(211)},130:function(e,n,t){},132:function(e,n,t){},211:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(6),i=t.n(o),c=(t(128),t(130),t(132),t(75)),l=t(76),u=t(78),s=t(77),m=t(79),d=t(12),g=t(317),f=t(318),h=t(107),p=t.n(h),b=t(26),E=t(27);function v(){var e=Object(b.a)(["\n  width: 70px;\n  position: absolute;\n  cursor: pointer;\n  top: 10px;\n  left: calc(50% - 35px);\n  z-index: 2;\n\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n\n  transition: transform 250ms ease;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]);return v=function(){return e},e}var j=Object(E.c)("img")(v()),O=t(109),k=t.n(O);function x(){var e=Object(b.a)(["\n  filter: drop-shadow(0 0 5px #fff);\n"]);return x=function(){return e},e}function I(){var e=Object(b.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return I=function(){return e},e}var y=Object(E.c)("div")(I()),w=Object(E.c)(k.a)(x()),S=function(e){return r.a.createElement(y,null,r.a.createElement(w,{size:50,color:"#111"}))};function L(){var e=Object(b.a)(["\n  width: 40px;\n  position: absolute;\n  cursor: pointer;\n  top: 10px;\n  right: 10px;\n  z-index: 2;\n\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n\n  transition: transform 250ms ease;\n  &:hover {\n    transform: scale(1.02);\n  }\n"]);return L=function(){return e},e}var C=Object(E.c)("img")(L()),z=t(83),P=t(71),T=t(30),M=function(e){var n=e.children,t=Object(z.a)(e,["children"]);return r.a.createElement(d.b,{children:function(e){var a=e.location;return r.a.createElement(P.TransitionGroup,{className:"transition-group"},r.a.createElement(P.CSSTransition,{key:a.key,classNames:"fade",timeout:100},r.a.createElement(d.d,Object.assign({location:a,className:Object(T.cx)("router",{admin:/admin/.test(a.href)})},t),n)))}})},U=t(20),A=t.n(U),H=t(97),N=t.n(H),B=t(111),F=t.n(B),J=A.a.Map({loading:S,loader:{Home:function(){return t.e(3).then(t.bind(null,320))},navItems:function(){return fetch("/api/zones/").then(function(e){return e.json()})}},render:function(e,n){var t=e.Home.default,a=e.navItems.data;return r.a.createElement(t,Object.assign({},n,{navItems:a}))}}),q=A()({loading:S,loader:function(e){return t.e(4).then(t.bind(null,311))}}),D=A()({loading:S,loader:function(e){return t.e(5).then(t.bind(null,105))}}),G=A()({loading:S,loader:function(e){return t.e(6).then(t.bind(null,319))}}),W=A()({loading:S,loader:function(e){return t.e(7).then(t.bind(null,312))}}),K=A()({loading:S,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(8)]).then(t.bind(null,321))}}),Q=A()({loading:S,loader:function(e){return Promise.all([t.e(0),t.e(12),t.e(9)]).then(t.bind(null,313))}}),R=A()({loading:S,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(10)]).then(t.bind(null,314))}}),V=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(o)))).logout=function(e){fetch("/api/logout",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var n=e.ok;setTimeout(t.getLoginState,1e3),n&&Object(d.e)("/")}).catch(function(e){return console.error(e)})},t.navigate=function(e){return function(n){Object(d.e)(e)}},t.menu=[r.a.createElement(g.a.Item,{key:"0",onClick:t.navigate("/login")},"Login"),r.a.createElement(g.a.Item,{key:"1",onClick:t.navigate("/admin")},"Settings"),r.a.createElement(g.a.Item,{key:"2",onClick:t.logout},"Logout")],t.state={loggedIn:!1,menuItems:t.menu.slice(0,1)},t.getLoginState=function(){fetch("/api/loggedIn",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var n=e.ok?t.menu.slice(1):t.menu.slice(0,1);e.ok&&"admin"!==e.type&&n.splice(0,1),t.setState({loggedIn:e,menuItems:n})}).catch(function(e){console.error(e),t.setState({loggedIn:!1,menuItems:t.menu.slice(0,1)})})},t.getLogoAndUser=function(e){var n=e.location;return/login|admin/.test(n.href)?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{src:N.a,alt:"Chomok Logo",onClick:t.navigate("/")}),r.a.createElement(f.a,{path:"/!login",overlay:r.a.createElement(g.a,{children:t.state.menuItems}),trigger:["click"]},r.a.createElement(C,{alt:"User Icon",src:F.a,onMouseOver:t.getLoginState})))},t.getBurgerMenu=function(e){var n=e.location;return/admin/.test(n.href)?null:r.a.createElement(p.a,{outerContainerId:"root",pageWrapId:"page"},r.a.createElement(d.a,{to:"/"},"Home"),r.a.createElement(d.a,{to:"/about"},"About Us"),r.a.createElement(d.a,{to:"/contact"},"Contact Us"))},t.adminPage=function(e){return t.state.loggedIn?"home"===e?r.a.createElement("h1",null,":)"):"offers"===e?r.a.createElement(K,null):"add-offer"===e?r.a.createElement(Q,null):"zones"===e?r.a.createElement(R,null):void 0:(Object(d.e)("/login"),null)},t}return Object(m.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,null,this.getBurgerMenu),r.a.createElement(d.b,null,this.getLogoAndUser),r.a.createElement(M,{id:"page"},r.a.createElement(J,{path:"/"}),r.a.createElement(q,{path:"/offer/:zone"}),r.a.createElement(d.c,{from:"/admin",path:"/admin",to:"/admin/home"}),r.a.createElement(G,{path:"/admin/:page",render:this.adminPage}),r.a.createElement(W,{path:"/login"}),r.a.createElement(D,{default:!0})))}},{key:"componentDidMount",value:function(){this.getLoginState(),setTimeout(this.getLoginState,500),setTimeout(this.getLoginState,1500),setTimeout(this.getLoginState,2500)}}]),n}(r.a.PureComponent);i.a.render(r.a.createElement(V,null),document.querySelector("#root"))},97:function(e,n,t){e.exports=t.p+"static/media/logo.fefa670c.png"}},[[123,13,11]]]);
//# sourceMappingURL=main.963fe376.chunk.js.map