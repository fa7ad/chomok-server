{"version":3,"sources":["img/user.png","components/Loading.js","components/Logo.js","components/UserIcon.js","components/TransitionRouter.js","App.js","index.js","img/logo.png"],"names":["module","exports","__webpack_require__","p","Wrapper","styled","_templateObject","Spinner","GridLoader","_templateObject2","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","size","color","UserIcon_templateObject","TransitionRouter","_ref","children","Object","objectWithoutProperties","react_default","es","_ref2","location","react_transition_group","className","key","classNames","timeout","assign","cx","admin","test","href","Home","Loadable","Map","loading","loader","e","then","bind","navItems","fetch","r","json","render","loaded","props","default","data","Offer","_","NotFound","Admin","Login","OffersAdmin","Promise","all","AddOfferAdmin","ZonesAdmin","AddZoneAdmin","App","logout","credentials","ok","setTimeout","_this","getLoginState","navigate","catch","console","error","addr","menu","Item","onClick","state","loggedIn","menuItems","slice","type","splice","setState","getLogoAndUser","Fragment","Logo","src","logoImg","alt","dropdown","path","overlay","trigger","UserIcon","userImg","onMouseOver","getBurgerMenu","_ref3","slide_default","outerContainerId","pageWrapId","to","adminPage","page","this","components_TransitionRouter","id","App_Home","from","React","PureComponent","ReactDOM","src_App","document","querySelector"],"mappings":"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","file":"static/js/main.0216d846.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/user.e6560136.png\";","import React from 'react'\nimport styled from 'react-emotion'\nimport GridLoader from 'react-spinners/GridLoader'\n\nconst Wrapper = styled('div')`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nconst Spinner = styled(GridLoader)`\n  filter: drop-shadow(0 0 5px #fff);\n`\n\nexport default p => (\n  <Wrapper>\n    <Spinner size={50} color='#111' />\n  </Wrapper>\n)\n","import styled from 'react-emotion'\n\nexport default styled('img')`\n  width: 80px;\n  position: absolute;\n  cursor: pointer;\n  top: 2px;\n  left: calc(50% - 35px);\n  z-index: 2;\n\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n\n  transition: transform 250ms ease;\n  &:hover {\n    transform: scale(1.05);\n  }\n`\n","import styled from 'react-emotion'\n\nexport default styled('img')`\n  width: 40px;\n  position: absolute;\n  cursor: pointer;\n  top: 10px;\n  right: 10px;\n  z-index: 2;\n\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n\n  transition: transform 250ms ease;\n  &:hover {\n    transform: scale(1.02);\n  }\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Location, Router } from '@reach/router'\nimport { TransitionGroup, CSSTransition } from 'react-transition-group'\nimport { cx } from 'emotion'\n\nconst TransitionRouter = ({ children, ...p }) => (\n  <Location\n    children={({ location }) => (\n      <TransitionGroup className='transition-group'>\n        <CSSTransition key={location.key} classNames='fade' timeout={100}>\n          <Router\n            location={location}\n            className={cx('router', { admin: /admin/.test(location.href) })}\n            {...p}>\n            {children}\n          </Router>\n        </CSSTransition>\n      </TransitionGroup>\n    )}\n  />\n)\n\nTransitionRouter.propTypes = {\n  children: PropTypes.node\n}\n\nexport default TransitionRouter\n","import React from 'react'\nimport { navigate, Link, Location, Redirect } from '@reach/router'\n\n// UI components\nimport { Menu, Dropdown } from 'antd'\nimport BurgerMenu from 'react-burger-menu/lib/menus/slide'\n\n// Custom components\nimport Logo from './components/Logo'\nimport loading from './components/Loading'\nimport UserIcon from './components/UserIcon'\nimport Router from './components/TransitionRouter'\n\n// Routes wrapped with react-loadable\nimport Loadable from 'react-loadable'\n\n// Resources\nimport logoImg from './img/logo.png'\nimport userImg from './img/user.png'\n\nconst Home = Loadable.Map({\n  loading,\n  loader: {\n    Home: () => import('./pages/Home'),\n    navItems: () => fetch('/api/zones/').then(r => r.json())\n  },\n  render (loaded, props) {\n    const Home = loaded.Home.default\n    const navItems = loaded.navItems.data\n    return <Home {...props} navItems={navItems} />\n  }\n})\n\nconst Offer = Loadable({\n  loading,\n  loader: _ => import('./pages/Offer')\n})\n\nconst NotFound = Loadable({\n  loading,\n  loader: _ => import('./pages/NotFound')\n})\n\nconst Admin = Loadable({\n  loading,\n  loader: _ => import('./pages/Admin')\n})\n\nconst Login = Loadable({\n  loading,\n  loader: _ => import('./pages/Login')\n})\n\nconst OffersAdmin = Loadable({\n  loading,\n  loader: _ => import('./pages/_admin/Offers')\n})\nconst AddOfferAdmin = Loadable({\n  loading,\n  loader: _ => import('./pages/_admin/AddOffer')\n})\nconst ZonesAdmin = Loadable({\n  loading,\n  loader: _ => import('./pages/_admin/Zones')\n})\nconst AddZoneAdmin = Loadable({\n  loading,\n  loader: _ => import('./pages/_admin/AddZone')\n})\n\nclass App extends React.PureComponent {\n  logout = e => {\n    fetch('/api/logout', { credentials: 'include' })\n      .then(r => r.json())\n      .then(({ ok }) => {\n        setTimeout(this.getLoginState, 1000)\n        if (ok) navigate('/')\n      })\n      .catch(e => console.error(e))\n  }\n\n  navigate = addr => e => {\n    navigate(addr)\n  }\n\n  menu = [\n    <Menu.Item key='0' onClick={this.navigate('/login')}>\n      Login\n    </Menu.Item>,\n    <Menu.Item key='1' onClick={this.navigate('/admin')}>\n      Settings\n    </Menu.Item>,\n    <Menu.Item key='2' onClick={this.logout}>\n      Logout\n    </Menu.Item>\n  ]\n  state = {\n    loggedIn: false,\n    menuItems: this.menu.slice(0, 1)\n  }\n\n  render () {\n    return (\n      <>\n        <Location>{this.getBurgerMenu}</Location>\n        <Location>{this.getLogoAndUser}</Location>\n        <Router id='page'>\n          <Home path='/' />\n          <Offer path='/offer/:zone' />\n          <Redirect from='/admin' path='/admin' to='/admin/home' />\n          <Admin path='/admin/:page' render={this.adminPage} />\n          <Login path='/login' />\n          <NotFound default />\n        </Router>\n      </>\n    )\n  }\n\n  getLoginState = () => {\n    fetch('/api/loggedIn', { credentials: 'include' })\n      .then(r => r.json())\n      .then(loggedIn => {\n        const menuItems = loggedIn.ok\n          ? this.menu.slice(1)\n          : this.menu.slice(0, 1)\n        if (loggedIn.ok && loggedIn.type !== 'admin') menuItems.splice(0, 1)\n        this.setState({ loggedIn, menuItems })\n      })\n      .catch(e => {\n        console.error(e)\n        this.setState({ loggedIn: false, menuItems: this.menu.slice(0, 1) })\n      })\n  }\n\n  componentDidMount () {\n    this.getLoginState()\n    setTimeout(this.getLoginState, 500)\n    setTimeout(this.getLoginState, 1500)\n    setTimeout(this.getLoginState, 2500)\n  }\n\n  getLogoAndUser = ({ location }) => {\n    if (/login|admin/.test(location.href)) return null\n    return (\n      <>\n        <Logo src={logoImg} alt='Chomok Logo' onClick={this.navigate('/')} />\n        <Dropdown\n          path='/!login'\n          overlay={<Menu children={this.state.menuItems} />}\n          trigger={['click']}>\n          <UserIcon\n            alt='User Icon'\n            src={userImg}\n            onMouseOver={this.getLoginState}\n          />\n        </Dropdown>\n      </>\n    )\n  }\n\n  getBurgerMenu = ({ location }) =>\n    !/admin/.test(location.href) ? (\n      <BurgerMenu outerContainerId='root' pageWrapId='page'>\n        <Link to='/'>Home</Link>\n        <Link to='/about'>About Us</Link>\n        <Link to='/contact'>Contact Us</Link>\n      </BurgerMenu>\n    ) : null\n\n  adminPage = page => {\n    if (!this.state.loggedIn) {\n      navigate('/login')\n      return null\n    }\n    if (page === 'home') return <h1>:)</h1>\n    if (page === 'offers') return <OffersAdmin />\n    if (page === 'add-offer') return <AddOfferAdmin />\n    if (page === 'zones') return <ZonesAdmin />\n    if (page === 'add-zone') return <AddZoneAdmin />\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport 'antd/dist/antd.css'\nimport './styles/burger-menu.css'\nimport './styles/index.css'\n\nimport App from './App'\n\nReactDOM.render(<App />, document.querySelector('#root'))\n","module.exports = __webpack_public_path__ + \"static/media/logo.fefa670c.png\";"],"sourceRoot":""}