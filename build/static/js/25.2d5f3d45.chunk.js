(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{564:function(e,n,t){"use strict";t.r(n);var a=t(268),r=t.n(a),c=t(271),l=t(77),u=t(78),o=t(80),i=t(79),s=t(47),d=t(20),h=t(1),f=t.n(h),p=t(21),m=t(13),v=t(573),b=t(112),w=t(48),k=t(432),E=t.n(k);function x(){var e=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  > div {\n    margin-top: 20px;\n    margin-bottom: 20px;\n  }\n  .result pre {\n    font-size: 16px;\n    color: #111;\n    text-align: left;\n  }\n"]);return x=function(){return e},e}var O=Object(p.c)("div")(x());var g=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return(t=Object(o.a)(this,(e=Object(i.a)(n)).call.apply(e,[this].concat(u)))).state={manual:""},t.handleScan=function(){var e=Object(c.a)(r.a.mark(function e(n){var t,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&n.result){e.next=3;break}return e.abrupt("return");case 3:return t=n.result.replace("chomok://",""),e.next=6,fetch("/api/codes/".concat(t),{method:"POST",credentials:"include"});case 6:if(403!==(a=e.sent).status&&401!==a.status){e.next=10;break}throw Object(m.e)("/login"),new Error("Unauthorized");case 10:return e.next=12,a.json();case 12:if(!(c=e.sent).ok){e.next=17;break}r=c.data,v.a.info({title:"Valid code found!",content:f.a.createElement(f.a.Fragment,null,f.a.createElement("h1",null,"Value: ",r.value),f.a.createElement("h3",null,"Type: ",{perc:"Percentage Off",special:"Special Offer",bulk:"Bulk Discount"}[r.offertype]),f.a.createElement("h3",null,"Validity: ",r.validity)),onOk:function(e){return window.location.reload()}}),e.next=18;break;case 17:throw new Error("Invalid code");case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),console.error(e.t0);case 23:case"end":return e.stop()}var r},e,this,[[0,20]])}));return function(n){return e.apply(this,arguments)}}(),t.manualInput=function(e){return t.setState({manual:e.target.value})},t.checkManual=function(e){return t.handleScan(t.state.manual)},t}return Object(s.a)(n,e),Object(u.a)(n,[{key:"render",value:function(){var e=Math.min(300,.75*window.innerWidth|0);return f.a.createElement(O,null,f.a.createElement("div",{className:"result"},f.a.createElement("pre",null,"No valid QR found...")),f.a.createElement("div",null,f.a.createElement("h3",null,"Manual Entry"),f.a.createElement(b.a,{placeholder:"Offer code",onChange:this.manualInput}),f.a.createElement(w.a,{onClick:this.checkManual},"Check")),f.a.createElement("div",null,f.a.createElement(E.a,{onQrCodeScanned:this.handleScan,width:e,height:e,showAimAssist:!1})))}}]),n}(f.a.PureComponent);n.default=g}}]);
//# sourceMappingURL=25.2d5f3d45.chunk.js.map