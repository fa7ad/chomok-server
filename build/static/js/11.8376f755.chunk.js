(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{341:function(e,t,n){"use strict";n.r(t);var a=n(228),r=n(76),l=n(77),i=n(79),s=n(78),o=n(80),c=n(1),u=n.n(c),f=n(216),m=n.n(f),h=n(254),p=n(12),d=n(336),g=n(84),E=n(2),y=n.n(E),v=n(7),b=n.n(v),w=n(4),O=n.n(w),I=n(8),S=n.n(I),j=n(3),x=n.n(j),k=n(5),D=n.n(k),C=n(6),M=n(15),z=n(9),Y=n.n(z),N=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},P=function(e){function t(e){O()(this,t);var n=x()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setScale=function(){var e=n.avatarChildren;if(e){var t=e.offsetWidth,a=C.findDOMNode(n).getBoundingClientRect().width;a-8<t?n.setState({scale:(a-8)/t}):n.setState({scale:1})}},n.handleImgLoadError=function(){var e=n.props.onError;!1!==(e?e():void 0)&&n.setState({isImgExist:!1})},n.state={scale:1,isImgExist:!0},n}return D()(t,e),S()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.prefixCls,l=a.shape,i=a.size,s=a.src,o=a.icon,u=a.className,f=a.alt,m=N(a,["prefixCls","shape","size","src","icon","className","alt"]),h=this.state,p=h.isImgExist,d=h.scale,g=Y()((e={},b()(e,r+"-lg","large"===i),b()(e,r+"-sm","small"===i),e)),E=Y()(r,u,g,(t={},b()(t,r+"-"+l,l),b()(t,r+"-image",s&&p),b()(t,r+"-icon",o),t)),v="number"===typeof i?{width:i,height:i,lineHeight:i+"px",fontSize:o?i/2:18}:{},w=this.props.children;if(s&&p)w=c.createElement("img",{src:s,onError:this.handleImgLoadError,alt:f});else if(o)w=c.createElement(M.a,{type:o});else{var O=this.avatarChildren;if(O||1!==d){var I={msTransform:"scale("+d+")",WebkitTransform:"scale("+d+")",transform:"scale("+d+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(O.offsetWidth/2)+"px)"},S="number"===typeof i?{lineHeight:i+"px"}:{};w=c.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e},style:y()({},S,I)},w)}else w=c.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e}},w)}return c.createElement("span",y()({},m,{style:y()({},v,m.style),className:E}),w)}}]),t}(c.Component),T=P;P.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"};var B=n(328),L=function(e){function t(){var e,n;Object(r.a)(this,t);for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={offers:[],loading:!0},n.listStyle={textAlign:"left"},n.listMapper=function(e,t){return u.a.createElement(d.a.Item,{actions:[u.a.createElement(g.a,{onClick:n.deleteItem(e._id,t),type:"danger"},"DELETE!")]},u.a.createElement(d.a.Item.Meta,{avatar:u.a.createElement(T,{src:e.image,size:"large",shape:"square"}),title:n.getItemTitle(e),description:n.getItemDesc(e),style:n.listStyle}))},n.getItemTitle=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(B.a,{color:"red"},u.a.createElement("b",null,"Name:")," ",e.partner.name),u.a.createElement(B.a,{color:"orange"},u.a.createElement("b",null,"Zone:")," ",Object(h.c)(e.zone.division+" > "+e.zone.name)))},n.getItemDesc=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(B.a,{color:"magenta"},u.a.createElement("b",null,"Date: ")," ",m()(e.date,"YYYYMMDD").format("DD-MM-YYYY")),u.a.createElement(B.a,{color:"blue"},u.a.createElement("b",null,"Request:")," ",e.reqBy.length),u.a.createElement(B.a,{color:"green"},u.a.createElement("b",null,"Used:")," ",e.useBy.length),u.a.createElement(B.a,{color:"pink"},u.a.createElement("b",null,"Unused:")," ",e.reqBy.length-e.useBy.length))},n.deleteItem=function(e,t){return function(r){fetch("/api/offers/"+e,{method:"DELETE",credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error("Something went wrong");n.setState(function(e){var r=Object(a.a)({},n.state);return r.offers.splice(t,1),r})}).catch(function(e){console.error(e)})}},n}return Object(o.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return u.a.createElement(d.a,{loading:this.state.loading,itemLayout:"horizontal",dataSource:this.state.offers,renderItem:this.listMapper})}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/offers",{credentials:"include"}).then(function(e){return 401===e.status&&Object(p.e)("/login"),e.json()}).then(function(t){var n=t.ok,a=t.data;if(!n)throw new Error("Something went wrong");e.setState({offers:a,loading:!1})}).catch(function(e){console.error(e)})}}]),t}(u.a.PureComponent);t.default=L}}]);
//# sourceMappingURL=11.8376f755.chunk.js.map