(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{11:function(e,n,t){"use strict";var a=t(20),r=t(1),o=t.n(r),l=t(21),i=t(116),c=t.n(i);function u(){var e=Object(a.a)(["\n  filter: drop-shadow(0 0 5px #fff);\n"]);return u=function(){return e},e}function s(){var e=Object(a.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return s=function(){return e},e}var d=Object(l.c)("div")(s()),m=Object(l.c)(c.a)(u());n.a=function(e){return o.a.createElement(d,null,o.a.createElement(m,{size:50,color:"#111"}))}},133:function(e,n,t){e.exports=t(214)},140:function(e,n,t){},142:function(e,n,t){},214:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(6),l=t.n(o),i=(t(138),t(140),t(142),t(80)),c=t(81),u=t(83),s=t(82),d=t(84),m=t(20),f=t(21),g=t(13),h=t(573),p=t(572),b=t(114),E=t.n(b);function O(){var e=Object(m.a)(["\n  width: 80px;\n  position: absolute;\n  cursor: pointer;\n  top: 2px;\n  left: calc(50% - 40px);\n  z-index: 2;\n\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.45);\n  border-radius: 50%;\n\n  transition: transform 250ms ease;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]);return O=function(){return e},e}var v=Object(f.c)("img")(O()),k=t(10);function y(){var e=Object(m.a)(["\n  font-size: 24px;\n  position: absolute;\n  cursor: pointer;\n  top: 5px;\n  right: 5px;\n  z-index: 2;\n  display: block;\n\n  transition: all 250ms ease;\n  padding: 5px;\n"]);return y=function(){return e},e}var P=Object(f.c)(k.a)(y()),j=t(90),A=t(77),w=t(33),I=function(e){var n=e.children,t=Object(j.a)(e,["children"]);return r.a.createElement(g.b,{children:function(e){var a=e.location;return r.a.createElement(A.TransitionGroup,{className:"transition-group"},r.a.createElement(A.CSSTransition,{key:a.key,classNames:"fade",timeout:100},r.a.createElement(g.d,Object.assign({location:a,className:Object(w.cx)("router",{admin:/admin/.test(a.href)},{partner:/partner/.test(a.href)})},t),n)))}})},S=t(12),x=t.n(S),N=t(11),C=x.a.Map({loading:N.a,loader:{Home:function(){return t.e(10).then(t.bind(null,574))},navItems:function(){return fetch("/api/zones").then(function(e){return e.json()})}},render:function(e,n){var t=e.Home.default,a=e.navItems.data;return r.a.createElement(t,Object.assign({},n,{navItems:a}))}}),D=x()({loading:N.a,loader:function(e){return t.e(11).then(t.bind(null,550))}});D.Offers=x()({loading:N.a,loader:function(e){return Promise.all([t.e(1),t.e(2),t.e(4),t.e(6),t.e(12)]).then(t.bind(null,551))}}),D.AddOffer=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(2),t.e(3),t.e(13)]).then(t.bind(null,569))}}),D.Zones=x()({loading:N.a,loader:function(e){return Promise.all([t.e(2),t.e(4),t.e(14)]).then(t.bind(null,552))}}),D.AddZone=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(15)]).then(t.bind(null,553))}}),D.Partners=x()({loading:N.a,loader:function(e){return Promise.all([t.e(1),t.e(2),t.e(4),t.e(5),t.e(16)]).then(t.bind(null,554))}}),D.AddPartner=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(3),t.e(17)]).then(t.bind(null,555))}}),D.Admins=x()({loading:N.a,loader:function(e){return Promise.all([t.e(1),t.e(2),t.e(4),t.e(5),t.e(18)]).then(t.bind(null,556))}}),D.AddAdmin=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(3),t.e(19)]).then(t.bind(null,557))}}),D.Logo=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(8),t.e(20)]).then(t.bind(null,558))}}),D.Background=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(8),t.e(33),t.e(21)]).then(t.bind(null,559))}}),D.Users=x()({loading:N.a,loader:function(e){return Promise.all([t.e(2),t.e(4),t.e(5),t.e(6),t.e(22)]).then(t.bind(null,560))}});var L=x()({loading:N.a,loader:function(e){return t.e(23).then(t.bind(null,561))}});L.Offers=x()({loading:N.a,loader:function(e){return Promise.all([t.e(1),t.e(2),t.e(4),t.e(6),t.e(24)]).then(t.bind(null,562))}}),L.Scan=x()({loading:N.a,loader:function(e){return Promise.all([t.e(5),t.e(32),t.e(25)]).then(t.bind(null,563))}});var T=x()({loading:N.a,loader:function(e){return Promise.all([t.e(1),t.e(5),t.e(7),t.e(26)]).then(t.bind(null,564))}}),z=x()({loading:N.a,loader:function(e){return Promise.all([t.e(5),t.e(7),t.e(27)]).then(t.bind(null,565))}}),R=x()({loading:N.a,loader:function(e){return t.e(28).then(t.bind(null,36))}}),F=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(3),t.e(29)]).then(t.bind(null,566))}}),H=x()({loading:N.a,loader:function(e){return Promise.all([t.e(0),t.e(3),t.e(30)]).then(t.bind(null,567))}});function U(){var e=Object(m.a)(["\n  width: 100%;\n  max-width: 500px;\n  margin: 0 auto;\n"]);return U=function(){return e},e}var M=Object(f.a)(U()),G=function(e){function n(){var e,t;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(o)))).logout=function(e){fetch("/api/logout",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var n=e.ok;setTimeout(t.getLoginState,1e3),n&&window.location.reload()}).catch(function(e){return console.error(e)})},t.navigate=function(e){return function(n){Object(g.e)(e)}},t.menu=[r.a.createElement(h.a.Item,{key:"0",onClick:t.navigate("/login")},"Login / Register"),r.a.createElement(h.a.Item,{key:"1",onClick:t.navigate("/admin")},"Admin Panel"),r.a.createElement(h.a.Item,{key:"2",onClick:t.navigate("/partner")},"Partner Panel"),r.a.createElement(h.a.Item,{key:"3",onClick:t.logout},"Logout")],t.state={loggedIn:!1,menuItems:t.menu.slice(0,1)},t.adminPages=[{key:"home",name:"HOME",icon:"home"},{key:"offers",name:"OFFERS",icon:"bars"},{key:"add-offer",name:"ADD OFFER",icon:"plus"},{key:"zones",name:"ZONES",icon:"environment"},{key:"add-zone",name:"ADD ZONE",icon:"plus"},{key:"partners",name:"PARTNERS",icon:"team"},{key:"add-partner",name:"ADD PARTNER",icon:"usergroup-add"},{key:"admins",name:"ADMINS",icon:"user"},{key:"add-admin",name:"ADD ADMIN",icon:"user-add"},{key:"users",name:"USERS",icon:"team"},{key:"logo",name:"CHANGE LOGO",icon:"cloud-upload"},{key:"bg",name:"BACKGROUND",icon:"picture"},{key:"logout",name:"LOGOUT",icon:"logout"}],t.partnerPages=[{key:"home",name:"HOME",icon:"home"},{key:"offers",name:"OFFERS",icon:"bars"},{key:"scan",name:"SCAN",icon:"scan"},{key:"logout",name:"LOGOUT",icon:"logout"}],t.getLoginState=function(){fetch("/api/loggedIn",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var n=[];e.ok?("admin"===e.type&&n.push(t.menu[1]),"partner"===e.type&&n.push(t.menu[2]),n.push(t.menu[3])):n.push(t.menu[0]),t.setState({loggedIn:e,menuItems:n})}).catch(function(e){console.error(e),t.setState({loggedIn:!1,menuItems:t.menu.slice(0,1)})})},t.getNavContent=function(e){var n=e.location;return/admin|partner/.test(n.href)?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{outerContainerId:"root",pageWrapId:"page"},r.a.createElement(g.a,{to:"/"},"Home"),r.a.createElement(g.a,{to:"/about"},"About Us"),r.a.createElement(g.a,{to:"/contact"},"Contact Us")),r.a.createElement(g.a,{to:"/"},r.a.createElement(v,{src:"/images/logo.png",alt:"Chomok Logo"})),!/login|register/.test(n.href)&&r.a.createElement(p.a,{overlay:r.a.createElement(h.a,{children:t.state.menuItems}),trigger:["click"]},r.a.createElement(P,{type:"user",onMouseOver:t.getLoginState})))},t.partnerPage=function(e){if(!t.state.loggedIn)return Object(g.e)("/login"),null;switch(e){case"home":return r.a.createElement("img",{src:"https://i.imgur.com/661H1ET.gif",alt:"You're dumb",className:M});case"offers":return r.a.createElement(L.Offers,null);case"scan":return r.a.createElement(L.Scan,null);case"logout":return fetch("/api/logout",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.ok&&Object(g.e)("/")}).catch(function(e){return console.error(e)}),Object(g.f)("/");default:return r.a.createElement("h1",null,"Invalid route xD")}},t.adminPage=function(e){if(!t.state.loggedIn)return Object(g.e)("/login"),null;switch(e){case"home":return r.a.createElement("img",{src:"https://i.imgur.com/661H1ET.gif",alt:"You're dumb",className:M});case"offers":return r.a.createElement(D.Offers,null);case"add-offer":return r.a.createElement(D.AddOffer,null);case"zones":return r.a.createElement(D.Zones,null);case"add-zone":return r.a.createElement(D.AddZone,null);case"partners":return r.a.createElement(D.Partners,null);case"add-partner":return r.a.createElement(D.AddPartner,null);case"admins":return r.a.createElement(D.Admins,null);case"add-admin":return r.a.createElement(D.AddAdmin,null);case"logo":return r.a.createElement(D.Logo,null);case"bg":return r.a.createElement(D.Background,null);case"users":return r.a.createElement(D.Users,null);case"logout":return fetch("/api/logout",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.ok&&Object(g.e)("/")}).catch(function(e){return console.error(e)}),Object(g.f)("/");default:return r.a.createElement("h1",null,"Invalid route xD")}},t}return Object(d.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.b,null,this.getNavContent),r.a.createElement(I,{id:"page"},r.a.createElement(C,{path:"/"}),r.a.createElement(T,{path:"/offer/:zone"}),r.a.createElement(z,{path:"/offer/:zone/:type"}),r.a.createElement(g.c,{from:"/admin",path:"/admin",to:"/admin/home",noThrow:!0}),r.a.createElement(D,{path:"/admin/:page",pages:this.adminPages},this.adminPage),r.a.createElement(g.c,{from:"/partner",path:"/partner",to:"/partner/home",noThrow:!0}),r.a.createElement(L,{path:"/partner/:page",pages:this.partnerPages},this.partnerPage),r.a.createElement(F,{path:"/login"}),r.a.createElement(H,{path:"/register"}),r.a.createElement(R,{default:!0})))}},{key:"componentDidMount",value:function(){this.getLoginState(),setTimeout(this.getLoginState,500)}}]),n}(r.a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(G,null),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[133,34,31]]]);
//# sourceMappingURL=main.f6f1c444.chunk.js.map