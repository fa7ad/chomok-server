{"version":3,"sources":["components/Layout.js","pages/OfferType.js","pages/NotFound.js"],"names":["cdark","css","_templateObject","cnophone","_templateObject2","Section","styled","_ref","dark","nophone","className","p","Object","_ldata_my_projects_chomok_client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_3___default","a","createElement","assign","cx","_ldata_my_projects_chomok_client_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_templateObject3","btn","type","_templateObject4","ButtonLink","Link","Heading","_templateObject5","Content","_templateObject6","offerType","OfferType","state","loading","types","dict","perc","special","bulk","showOldCode","data","fetch","_id","code","then","r","status","Error","json","res","ok","console","error","_this","showData","catch","Modal","info","title","content","react__WEBPACK_IMPORTED_MODULE_6___default","qrcode_react__WEBPACK_IMPORTED_MODULE_8___default","value","offertype","onOk","navigate","_this$props","this","props","style","zone","_this$state","_components_Loading__WEBPACK_IMPORTED_MODULE_13__","length","_components_Layout__WEBPACK_IMPORTED_MODULE_14__","map","idx","to","concat","key","caption","_NotFound__WEBPACK_IMPORTED_MODULE_12__","_this2","reply","setState","offers","keys","filter","el","React","PureComponent","Wrapper","Box","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_1___default"],"mappings":"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","file":"static/js/24.fd0e164d.chunk.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from '@reach/router'\nimport styled, { css, cx } from 'react-emotion'\n\nexport const cdark = css`\n  background: rgba(0, 0, 0, 0.45);\n  color: #fff;\n  h1,\n  h2,\n  h3,\n  h4,\n  h5 {\n    color: #fefefe;\n  }\n`\n\nexport const cnophone = css`\n  @media (max-width: 639px) {\n    flex-basis: 100%;\n    display: none;\n  }\n`\n\nconst Sec = ({ dark, nophone, className, ...p }) => (\n  <section\n    className={cx(className, { [cdark]: dark }, { [cnophone]: nophone })}\n    {...p}\n  />\n)\n\nSec.propTypes = {\n  dark: PropTypes.bool,\n  nophone: PropTypes.bool,\n  className: PropTypes.string\n}\n\nexport const Section = styled(Sec)`\n  flex-basis: 50%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  transition: all 300ms ease;\n  @media (max-width: 639px) {\n    flex-basis: 100%;\n  }\n`\n\nconst btn = type => styled(type)`\n  text-transform: uppercase;\n  font-family: Montserrat, sans-serif;\n  padding: 10px;\n  border: solid 2px #fff;\n  color: #fff;\n  cursor: pointer;\n  outline: none;\n  transition: background-position 250ms ease, background-color 225ms 50ms ease;\n  background: transparent linear-gradient(to bottom, #fff 50%, transparent 50%)\n    0 100%/100% 200% no-repeat;\n  &:hover {\n    color: #333;\n    background-color: #fff;\n    background-position: 0 0;\n  }\n`\n\nexport const Button = btn('button')\nexport const ButtonLink = btn(Link)\n\nexport const Heading = styled('h1')`\n  font-family: 'Source Sans Pro', sans-serif;\n  font-weight: 900;\n  font-size: 4em;\n  color: #fefefe;\n  text-transform: uppercase;\n`\n\nexport const Content = styled('div')`\n  width: 75%;\n  text-align: justify;\n  text-transform: uppercase;\n  font-family: Montserrat, sans-serif;\n  margin-bottom: 1.5em;\n\n  max-height: 50vh;\n  overflow: hidden;\n`\n","import React from 'react'\nimport { Modal } from 'antd'\nimport QrCode from 'qrcode.react'\nimport PropTypes from 'prop-types'\nimport { css } from 'react-emotion'\nimport { navigate } from '@reach/router'\nimport { map, filter, keys } from 'ramda'\n\nimport { Wrapper, Box } from './NotFound'\nimport Loading from '../components/Loading'\nimport { Section, ButtonLink } from '../components/Layout'\n\nconst offerType = css`\n  flex-basis: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  h1,\n  h2,\n  h3 {\n    color: #fff;\n  }\n`\n\nclass OfferType extends React.PureComponent {\n  state = {\n    loading: true,\n    types: []\n  }\n\n  dict = {\n    perc: 'Percentage Off',\n    special: 'Special Offer',\n    bulk: 'Bulk Discount'\n  }\n\n  render () {\n    const { style, zone } = this.props\n    const { types, loading } = this.state\n\n    if (loading) return <Loading />\n\n    return types.length > 0 ? (\n      <Section style={style} className={offerType}>\n        <h1>Select an offer type</h1>\n        {types.map((type, idx) => (\n          <ButtonLink to={`/offer/${zone}/${type.key}`} key={idx}>\n            {type.caption}\n          </ButtonLink>\n        ))}\n      </Section>\n    ) : (\n      <Wrapper style={style}>\n        <Box>\n          <h1>No offer found!</h1>\n        </Box>\n      </Wrapper>\n    )\n  }\n\n  componentDidMount () {\n    fetch('/api/offers/dhaka/' + this.props.zone)\n      .then(r => r.json())\n      .then(reply => {\n        if (!reply.ok) return this.setState({ types: [], loading: false })\n        if (reply.data.code) return this.showOldCode(reply.data)\n        const { offers } = reply.data\n        const types = keys(filter(el => el, offers))\n        this.setState({\n          loading: false,\n          types: map(el => ({ key: el, caption: this.dict[el] }), types)\n        })\n      })\n  }\n\n  showOldCode = data => {\n    fetch('/api/codes/' + data._id + '/' + data.code.type)\n      .then(r => {\n        if (r.status === 401) throw new Error('Unauthorized')\n        return r.json()\n      })\n      .then(res => {\n        if (!res.ok) return console.error('Something went wrong')\n        this.showData(res.data)\n      })\n      .catch(console.error)\n  }\n\n  showData = data =>\n    Modal.info({\n      title: 'You already got a code!',\n      content: (\n        <div>\n          <QrCode value={'chomok://' + data.code} />\n          <pre>{data.code}</pre>\n          <h3>Type: {this.dict[data.offertype]}</h3>\n        </div>\n      ),\n      onOk () {\n        navigate('/')\n      }\n    })\n\n  static propTypes = {\n    style: PropTypes.object,\n    zone: PropTypes.string\n  }\n}\n\nexport default OfferType\n","import React from 'react'\nimport styled from 'react-emotion'\n\nexport const Wrapper = styled('div')`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`\n\nexport const Box = styled('div')`\n  background-color: rgba(255, 255, 255, 0.85);\n  box-shadow: 0 0 5px rgba(255, 255, 255, 0.85);\n  border-radius: 5px;\n  padding: 20px;\n  width: 50%;\n  max-width: 480px;\n\n  h1 {\n    font-weight: 900;\n  }\n  h2 {\n    font-weight: 400;\n    text-transform: uppercase;\n  }\n`\n\nexport default p => (\n  <Wrapper style={p.style}>\n    <Box>\n      <h1>404</h1>\n      <h2>Page not found!</h2>\n    </Box>\n  </Wrapper>\n)\n"],"sourceRoot":""}