(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{342:function(e,t,a){"use strict";var n=a(2),r=a.n(n),s=a(7),l=a.n(s),i=a(4),o=a.n(i),c=a(8),u=a.n(c),f=a(3),m=a.n(f),h=a(5),p=a.n(h),d=a(1),g=a(6),y=a(10),E=a(9),v=a.n(E),b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&(a[n[r]]=e[n[r]])}return a},O=function(e){function t(e){o()(this,t);var a=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.setScale=function(){var e=a.avatarChildren;if(e){var t=e.offsetWidth,n=g.findDOMNode(a).getBoundingClientRect().width;n-8<t?a.setState({scale:(n-8)/t}):a.setState({scale:1})}},a.handleImgLoadError=function(){var e=a.props.onError;!1!==(e?e():void 0)&&a.setState({isImgExist:!1})},a.state={scale:1,isImgExist:!0},a}return p()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,a=this,n=this.props,s=n.prefixCls,i=n.shape,o=n.size,c=n.src,u=n.icon,f=n.className,m=n.alt,h=b(n,["prefixCls","shape","size","src","icon","className","alt"]),p=this.state,g=p.isImgExist,E=p.scale,O=v()((e={},l()(e,s+"-lg","large"===o),l()(e,s+"-sm","small"===o),e)),w=v()(s,f,O,(t={},l()(t,s+"-"+i,i),l()(t,s+"-image",c&&g),l()(t,s+"-icon",u),t)),S="number"===typeof o?{width:o,height:o,lineHeight:o+"px",fontSize:u?o/2:18}:{},x=this.props.children;if(c&&g)x=d.createElement("img",{src:c,onError:this.handleImgLoadError,alt:m});else if(u)x=d.createElement(y.a,{type:u});else{var I=this.avatarChildren;if(I||1!==E){var k={msTransform:"scale("+E+")",WebkitTransform:"scale("+E+")",transform:"scale("+E+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(I.offsetWidth/2)+"px)"},j="number"===typeof o?{lineHeight:o+"px"}:{};x=d.createElement("span",{className:s+"-string",ref:function(e){return a.avatarChildren=e},style:r()({},j,k)},x)}else x=d.createElement("span",{className:s+"-string",ref:function(e){return a.avatarChildren=e}},x)}return d.createElement("span",r()({},h,{style:r()({},S,h.style),className:w}),x)}}]),t}(d.Component);t.a=O,O.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"}},441:function(e,t,a){"use strict";a.r(t);var n=a(78),r=a(79),s=a(81),l=a(80),i=a(82),o=a(1),c=a.n(o),u=a(216),f=a.n(u),m=a(231),h=a(11),p=a(449),d=a(342),g=a(430),y=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(i)))).state={offers:[],loading:!0},a.listStyle={textAlign:"left"},a.listMapper=function(e,t){return c.a.createElement(p.a.Item,{actions:null,key:e._id},c.a.createElement(p.a.Item.Meta,{avatar:c.a.createElement(d.a,{src:e.image,size:"large",shape:"square"}),title:a.getItemTitle(e),description:a.getItemDesc(e),style:a.listStyle}))},a.getItemTitle=function(e){var t=f()(e.date,"YYYYMMDD"),a=t.isSame(f()(),"day"),n=t.format("DD-MM-YYYY");return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{color:a?"cyan":"magenta"},c.a.createElement("b",null,"Date: ")," ",a?"Today / ":"",n),c.a.createElement(g.a,{color:"orange"},c.a.createElement("b",null,"Zone:")," ",Object(m.k)(e.zone.division+" > "+e.zone.name)))},a.getItemDesc=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,{color:"blue"},c.a.createElement("b",null,"Request:")," ",e.reqBy.length),c.a.createElement(g.a,{color:"green"},c.a.createElement("b",null,"Used:")," ",e.useBy.length),c.a.createElement(g.a,{color:"pink"},c.a.createElement("b",null,"Unused:")," ",e.reqBy.length-e.useBy.length))},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,{loading:this.state.loading,itemLayout:"horizontal",dataSource:this.state.offers,renderItem:this.listMapper})}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/offers",{credentials:"include"}).then(function(e){return 401===e.status&&Object(h.e)("/login"),e.json()}).then(function(t){var a=t.ok,n=t.data;if(!a)throw new Error("Something went wrong");e.setState({offers:n,loading:!1})}).catch(function(e){console.error(e)})}}]),t}(c.a.PureComponent);t.default=y}}]);
//# sourceMappingURL=22.d177de58.chunk.js.map