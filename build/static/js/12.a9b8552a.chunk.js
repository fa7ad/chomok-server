(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{365:function(e,t,n){"use strict";var a=n(2),r=n.n(a),i=n(7),l=n.n(i),s=n(4),o=n.n(s),c=n(8),u=n.n(c),f=n(3),m=n.n(f),h=n(5),d=n.n(h),p=n(1),g=n(6),E=n(10),y=n(9),v=n.n(y),b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},w=function(e){function t(e){o()(this,t);var n=m()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setScale=function(){var e=n.avatarChildren;if(e){var t=e.offsetWidth,a=g.findDOMNode(n).getBoundingClientRect().width;a-8<t?n.setState({scale:(a-8)/t}):n.setState({scale:1})}},n.handleImgLoadError=function(){var e=n.props.onError;!1!==(e?e():void 0)&&n.setState({isImgExist:!1})},n.state={scale:1,isImgExist:!0},n}return d()(t,e),u()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,n=this,a=this.props,i=a.prefixCls,s=a.shape,o=a.size,c=a.src,u=a.icon,f=a.className,m=a.alt,h=b(a,["prefixCls","shape","size","src","icon","className","alt"]),d=this.state,g=d.isImgExist,y=d.scale,w=v()((e={},l()(e,i+"-lg","large"===o),l()(e,i+"-sm","small"===o),e)),O=v()(i,f,w,(t={},l()(t,i+"-"+s,s),l()(t,i+"-image",c&&g),l()(t,i+"-icon",u),t)),S="number"===typeof o?{width:o,height:o,lineHeight:o+"px",fontSize:u?o/2:18}:{},I=this.props.children;if(c&&g)I=p.createElement("img",{src:c,onError:this.handleImgLoadError,alt:m});else if(u)I=p.createElement(E.a,{type:u});else{var k=this.avatarChildren;if(k||1!==y){var x={msTransform:"scale("+y+")",WebkitTransform:"scale("+y+")",transform:"scale("+y+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(k.offsetWidth/2)+"px)"},j="number"===typeof o?{lineHeight:o+"px"}:{};I=p.createElement("span",{className:i+"-string",ref:function(e){return n.avatarChildren=e},style:r()({},j,x)},I)}else I=p.createElement("span",{className:i+"-string",ref:function(e){return n.avatarChildren=e}},I)}return p.createElement("span",r()({},h,{style:r()({},S,h.style),className:O}),I)}}]),t}(p.Component);t.a=w,w.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"}},550:function(e,t,n){"use strict";n.r(t);var a=n(76),r=n(77),i=n(79),l=n(78),s=n(80),o=n(1),c=n.n(o),u=n(216),f=n.n(u),m=n(231),h=n(13),d=n(567),p=n(83),g=n(365),E=n(548),y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={offers:[],loading:!0},n.listStyle={textAlign:"left"},n.listMapper=function(e,t){return c.a.createElement(d.a.Item,{actions:[c.a.createElement(p.a,{onClick:n.deleteItem(e._id,t),type:"danger"},"DELETE!")],key:e._id},c.a.createElement(d.a.Item.Meta,{avatar:c.a.createElement(g.a,{src:e.image,size:"large",shape:"square"}),title:n.getItemTitle(e),description:n.getItemDesc(e),style:n.listStyle}))},n.getItemTitle=function(e){var t=f()(e.date,"YYYYMMDD"),n=t.isSame(f()(),"day"),a=t.format("DD-MM-YYYY");return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{color:n?"cyan":"magenta"},c.a.createElement("b",null,"Date: ")," ",n?"Today / ":"",a),c.a.createElement(E.a,{color:"red"},c.a.createElement("b",null,"Name:")," ",e.partner.name),c.a.createElement(E.a,{color:"orange"},c.a.createElement("b",null,"Zone:")," ",Object(m.k)(e.zone.division+" > "+e.zone.name)))},n.getItemDesc=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{color:"blue"},c.a.createElement("b",null,"Request:")," ",e.reqBy.length),c.a.createElement(E.a,{color:"green"},c.a.createElement("b",null,"Used:")," ",e.useBy.length),c.a.createElement(E.a,{color:"pink"},c.a.createElement("b",null,"Unused:")," ",e.reqBy.length-e.useBy.length))},n.deleteItem=function(e,t){return function(a){fetch("/api/offers/"+e,{method:"DELETE",credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error("Something went wrong");n.setState(function(e){var n=e.offers.slice();return n.splice(t,1),{offers:n}})}).catch(function(e){console.error(e)})}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(d.a,{loading:this.state.loading,itemLayout:"horizontal",dataSource:this.state.offers,renderItem:this.listMapper})}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/offers",{credentials:"include"}).then(function(e){return 401===e.status&&Object(h.e)("/login"),e.json()}).then(function(t){var n=t.ok,a=t.data;if(!n)throw new Error("Something went wrong");e.setState({offers:a,loading:!1})}).catch(function(e){console.error(e)})}}]),t}(c.a.PureComponent);t.default=y}}]);
//# sourceMappingURL=12.a9b8552a.chunk.js.map