{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","pages/_admin/AddAdmin.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__webpack_require__","d","__webpack_exports__","FormItem","Form","Item","AddAdmin","state","progress","handleSubmit","e","preventDefault","_this","setState","props","form","validateFieldsAndScroll","err","values","body","JSON","stringify","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_objectSpread","admin","fetch","credentials","method","headers","Content-Type","then","r","status","navigate","json","rep","ok","catch","console","error","getFieldDecorator","this","react_default","a","createElement","es_form","onSubmit","rules","required","message","input","placeholder","type","es_button","htmlType","icon","PureComponent","ControlledAddAdmin","create"],"mappings":"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","file":"static/js/18.e624aeff.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import PropTypes from 'prop-types'\nimport { navigate } from '@reach/router'\nimport React, { PureComponent } from 'react'\nimport { Form, Button, Input, Icon } from 'antd'\n\nconst FormItem = Form.Item\n\nclass AddAdmin extends PureComponent {\n  state = {\n    progress: 'plus'\n  }\n\n  handleSubmit = e => {\n    e.preventDefault()\n    this.setState({ progress: 'loading' })\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (err) return this.setState({ progress: 'close' })\n      const body = JSON.stringify({ ...values, admin: true })\n      fetch('/api/register', {\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body\n      })\n        .then(r => {\n          if (r.status === 401) navigate('/login')\n          return r.json()\n        })\n        .then(rep => {\n          if (rep.ok) {\n            this.setState({ progress: 'check' })\n            navigate('/admin/admins')\n          } else throw rep\n        })\n        .catch(e => {\n          this.setState({ progress: 'close' })\n          console.error(e)\n        })\n    })\n  }\n\n  render () {\n    const { getFieldDecorator } = this.props.form\n\n    return (\n      <Form onSubmit={this.handleSubmit}>\n        <FormItem>\n          {getFieldDecorator('name', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the full name!'\n              }\n            ]\n          })(<Input placeholder='Full name' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('phone', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the phone number!'\n              }\n            ]\n          })(<Input placeholder='Phone number' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('username', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the username!'\n              }\n            ]\n          })(<Input placeholder='Username' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('password', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the password!'\n              }\n            ]\n          })(<Input placeholder='Password' type='password' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('email', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the email!'\n              }\n            ]\n          })(<Input placeholder='E-mail' type='email' />)}\n        </FormItem>\n        <FormItem>\n          <Button\n            type={this.state.progress === 'close' ? 'danger' : 'primary'}\n            htmlType='submit'>\n            <Icon type={this.state.progress} />\n          </Button>\n        </FormItem>\n      </Form>\n    )\n  }\n\n  static propTypes = {\n    form: PropTypes.object\n  }\n}\n\nconst ControlledAddAdmin = Form.create()(AddAdmin)\n\nexport default ControlledAddAdmin\n","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}"],"sourceRoot":""}