{"version":3,"sources":["pages/_admin/Zones.js"],"names":["AdminZones","state","offers","loading","listStyle","textAlign","listMapper","item","idx","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_7__","Item","actions","antd__WEBPACK_IMPORTED_MODULE_8__","onClick","_this","deleteItem","_id","type","Meta","title","getItemTitle","description","getItemDesc","style","antd__WEBPACK_IMPORTED_MODULE_9__","color","name","division","id","e","fetch","method","credentials","then","res","json","_ref","ok","Error","setState","p","copy","Object","_ldata_my_projects_chomok_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","splice","catch","console","error","this","itemLayout","dataSource","renderItem","_this2","r","status","navigate","_ref2","data","React","PureComponent"],"mappings":"yMAIMA,6MACJC,MAAQ,CACNC,OAAQ,GACRC,SAAS,KAGXC,UAAY,CACVC,UAAW,UA6BbC,WAAa,SAACC,EAAMC,GAAP,OACXC,EAAAC,EAAAC,cAACC,EAAA,EAAKC,KAAN,CACEC,QAAS,CACPL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAQC,QAASC,EAAKC,WAAWX,EAAKY,IAAKX,GAAMY,KAAK,UAAtD,aAIFX,EAAAC,EAAAC,cAACC,EAAA,EAAKC,KAAKQ,KAAX,CACEC,MAAOL,EAAKM,aAAahB,GACzBiB,YAAaP,EAAKQ,YAAYlB,GAC9BmB,MAAOT,EAAKb,gBAKlBmB,aAAe,SAAAhB,GAAI,OACjBE,EAAAC,EAAAC,cAACgB,EAAA,EAAD,CAAKC,MAAM,OACTnB,EAAAC,EAAAC,cAAA,kBADF,IACgBJ,EAAKsB,SAIvBJ,YAAc,SAAAlB,GAAI,OAChBE,EAAAC,EAAAC,cAACgB,EAAA,EAAD,CAAKC,MAAM,QACTnB,EAAAC,EAAAC,cAAA,sBADF,IACoBJ,EAAKuB,aAI3BZ,WAAa,SAACa,EAAIvB,GAAL,OAAa,SAAAwB,GACxBC,MAAM,cAAgBF,EAAI,CACxBG,OAAQ,SACRC,YAAa,YAEZC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAG,GACJ,IADgBA,EAATC,GAQL,MAAM,IAAIC,MAAM,wBANhBxB,EAAKyB,SAAS,SAAAC,GACZ,IAAMC,EAAIC,OAAAC,EAAA,EAAAD,CAAA,GAAQ5B,EAAKhB,OAEvB,OADA2C,EAAK1C,OAAO6C,OAAOvC,EAAK,GACjBoC,MAMZI,MAAM,SAAAhB,GACLiB,QAAQC,MAAMlB,+EAtElB,OACEvB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACET,QAASgD,KAAKlD,MAAME,QACpBiD,WAAW,aACXC,WAAYF,KAAKlD,MAAMC,OACvBoD,WAAYH,KAAK7C,yDAKF,IAAAiD,EAAAJ,KACnBlB,MAAM,aAAc,CAAEE,YAAa,YAChCC,KAAK,SAAAoB,GAEJ,OADiB,MAAbA,EAAEC,QAAgBC,YAAS,UACxBF,EAAElB,SAEVF,KAAK,SAAAuB,GAAkB,IAAfnB,EAAemB,EAAfnB,GAAIoB,EAAWD,EAAXC,KACX,IAAKpB,EAAI,MAAM,IAAIC,MAAM,wBACzBc,EAAKb,SAAS,CAAExC,OAAQ0D,EAAMzD,SAAS,MAExC6C,MAAM,SAAAhB,GACLiB,QAAQC,MAAMlB,YAhCG6B,IAAMC,eAsFhB9D","file":"static/js/13.c4af0be0.chunk.js","sourcesContent":["import React from 'react'\nimport { List, Button, Tag } from 'antd'\nimport { navigate } from '@reach/router'\n\nclass AdminZones extends React.PureComponent {\n  state = {\n    offers: [],\n    loading: true\n  }\n\n  listStyle = {\n    textAlign: 'left'\n  }\n\n  render () {\n    return (\n      <List\n        loading={this.state.loading}\n        itemLayout='horizontal'\n        dataSource={this.state.offers}\n        renderItem={this.listMapper}\n      />\n    )\n  }\n\n  componentDidMount () {\n    fetch('/api/zones', { credentials: 'include' })\n      .then(r => {\n        if (r.status === 401) navigate('/login')\n        return r.json()\n      })\n      .then(({ ok, data }) => {\n        if (!ok) throw new Error('Something went wrong')\n        this.setState({ offers: data, loading: false })\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n\n  listMapper = (item, idx) => (\n    <List.Item\n      actions={[\n        <Button onClick={this.deleteItem(item._id, idx)} type='danger'>\n          DELETE!\n        </Button>\n      ]}>\n      <List.Item.Meta\n        title={this.getItemTitle(item)}\n        description={this.getItemDesc(item)}\n        style={this.listStyle}\n      />\n    </List.Item>\n  )\n\n  getItemTitle = item => (\n    <Tag color='red'>\n      <b>Name:</b> {item.name}\n    </Tag>\n  )\n\n  getItemDesc = item => (\n    <Tag color='blue'>\n      <b>Division:</b> {item.division}\n    </Tag>\n  )\n\n  deleteItem = (id, idx) => e => {\n    fetch('/api/zones/' + id, {\n      method: 'DELETE',\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then(({ ok }) => {\n        if (ok) {\n          this.setState(p => {\n            const copy = { ...this.state }\n            copy.offers.splice(idx, 1)\n            return copy\n          })\n        } else {\n          throw new Error('Something went wrong')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n}\n\nexport default AdminZones\n"],"sourceRoot":""}