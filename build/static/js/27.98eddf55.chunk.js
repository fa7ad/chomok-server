(window.webpackJsonp=window.webpackJsonp||[]).push([[27,28],{232:function(n,t,e){"use strict";e.d(t,"f",function(){return j}),e.d(t,"e",function(){return O}),e.d(t,"b",function(){return E}),e.d(t,"a",function(){return L}),e.d(t,"d",function(){return F}),e.d(t,"c",function(){return P}),e.d(t,"g",function(){return S});var r=e(221),o=e(81),a=e(20),i=e(1),c=e.n(i),u=e(13),f=e(21);function l(){var n=Object(a.a)(["\n  .ant-modal-content {\n    background: rgba(0, 0, 0, 0.65);\n    text-align: center;\n    border-radius: 0;\n  }\n  .ant-modal-confirm-content,\n  .ant-modal-confirm-title,\n  h3,\n  pre,\n  span {\n    color: #fff;\n  }\n\n  .ant-modal-confirm-content pre {\n    background-color: #fff;\n    color: #111;\n    display: inline-flex;\n    padding: 2px;\n  }\n\n  .ant-modal-confirm-content .the-qr {\n    margin: 15px auto;\n  }\n\n  .ant-modal-confirm-title {\n    text-transform: uppercase;\n    font-size: 1.3em;\n  }\n\n  .ant-modal-confirm-body-wrapper {\n    border: 4px solid #fff;\n    padding: 20px;\n  }\n\n  .ant-modal-confirm-btns {\n    float: none;\n  }\n\n  .ant-modal-confirm-content {\n    margin-left: 0 !important;\n    text-align: center;\n\n    img {\n      width: 100%;\n    }\n  }\n\n  .ant-btn {\n    background: #fff;\n    border-radius: 0;\n    border: none;\n    padding: 0 40px;\n    &,\n    & span {\n      color: #111;\n    }\n  }\n\n  i.anticon {\n    margin-right: 0;\n    display: none;\n  }\n"]);return l=function(){return n},n}function s(){var n=Object(a.a)(["\n  width: 75%;\n  text-align: justify;\n  text-transform: uppercase;\n  font-family: Montserrat, sans-serif;\n  margin-bottom: 1.5em;\n\n  max-height: 50vh;\n  overflow: hidden;\n"]);return s=function(){return n},n}function h(){var n=Object(a.a)(["\n  font-family: 'Source Sans Pro', sans-serif;\n  font-size: 4em;\n  color: #fefefe;\n  text-transform: uppercase;\n"]);return h=function(){return n},n}function d(){var n=Object(a.a)(["\n  text-transform: uppercase;\n  font-family: Montserrat, sans-serif;\n  padding: 10px;\n  border: solid 2px #fff;\n  color: #fff;\n  cursor: pointer;\n  outline: none;\n  transition: background-position 250ms ease, background-color 225ms 50ms ease;\n  background: transparent linear-gradient(to bottom, #fff 50%, transparent 50%)\n    0 100%/100% 200% no-repeat;\n  &:hover {\n    color: #333;\n    background-color: #fff;\n    background-position: 0 0;\n  }\n"]);return d=function(){return n},n}function p(){var n=Object(a.a)(["\n  width: 100%;\n  height: 100%;\n  max-width: 960px;\n  background: rgba(0, 0, 0, 0.25);\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  @media screen and (min-width: 641px) {\n    margin-bottom: 85px;\n  }\n  &,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5 {\n    color: #fff;\n  }\n  form {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    input,\n    textarea {\n      max-width: 900px;\n      width: calc(100% - 10px);\n      margin: 1em 0;\n    }\n    button:last-child {\n      margin: 1em 0;\n    }\n  }\n  form input,\n  form textarea,\n  form button {\n    border-radius: 0;\n    background: rgba(0, 0, 0, 0.5);\n    color: #fff;\n  }\n"]);return p=function(){return n},n}function m(){var n=Object(a.a)(["\n  background-color: #fff;\n  color: #111;\n  text-align: justify;\n  h3 {\n    font-size: 2em;\n  }\n  img {\n    max-height: 200px;\n  }\n  .contacts img {\n    height: 64px;\n    margin: 0 5px;\n  }\n  .row {\n    margin-top: 16px;\n    margin-bottom: 16px;\n  }\n"]);return m=function(){return n},n}function g(){var n=Object(a.a)(["\n  flex-basis: 100%;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  .empty {\n    min-height: 85px;\n    width: 100%;\n    background-color: red;\n    display: block;\n    visibility: hidden;\n  }\n"]);return g=function(){return n},n}function v(){var n=Object(a.a)(["\n  flex-basis: 50%;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  transition: all 300ms ease;\n  @media (max-width: 639px) {\n    flex-basis: 100%;\n  }\n"]);return v=function(){return n},n}function b(){var n=Object(a.a)(["\n  @media (max-width: 639px) {\n    flex-basis: 100%;\n    display: none;\n  }\n"]);return b=function(){return n},n}function y(){var n=Object(a.a)(["\n  background: rgba(0, 0, 0, 0.45);\n  color: #fff;\n  h1,\n  h2,\n  h3,\n  h4,\n  h5 {\n    color: #fefefe;\n  }\n"]);return y=function(){return n},n}var x=Object(f.a)(y()),w=Object(f.a)(b()),j=Object(f.c)(function(n){var t=n.dark,e=n.nophone,a=n.className,i=Object(o.a)(n,["dark","nophone","className"]);return c.a.createElement("section",Object.assign({className:Object(f.b)(a,Object(r.a)({},x,t),Object(r.a)({},w,e))},i))})(v()),O=Object(f.c)("div")(g());O.White=Object(f.c)(O)(m());var E=Object(f.c)("main")(p()),k=function(n){return Object(f.c)(n)(d())},L=(k("button"),k(u.a)),F=Object(f.c)("h1")(h()),P=Object(f.c)("div")(s()),S=Object(f.a)(l())},264:function(n,t,e){n.exports=e(265)},265:function(n,t,e){var r=function(){return this||"object"===typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,n.exports=e(266),o)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(i){r.regeneratorRuntime=void 0}},266:function(n,t){!function(t){"use strict";var e,r=Object.prototype,o=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",f="object"===typeof n,l=t.regeneratorRuntime;if(l)f&&(n.exports=l);else{(l=t.regeneratorRuntime=f?n.exports:{}).wrap=x;var s="suspendedStart",h="suspendedYield",d="executing",p="completed",m={},g={};g[i]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(z([])));b&&b!==r&&o.call(b,i)&&(g=b);var y=E.prototype=j.prototype=Object.create(g);O.prototype=y.constructor=E,E.constructor=O,E[u]=O.displayName="GeneratorFunction",l.isGeneratorFunction=function(n){var t="function"===typeof n&&n.constructor;return!!t&&(t===O||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,E):(n.__proto__=E,u in n||(n[u]="GeneratorFunction")),n.prototype=Object.create(y),n},l.awrap=function(n){return{__await:n}},k(L.prototype),L.prototype[c]=function(){return this},l.AsyncIterator=L,l.async=function(n,t,e,r){var o=new L(x(n,t,e,r));return l.isGeneratorFunction(t)?o:o.next().then(function(n){return n.done?n.value:o.next()})},k(y),y[u]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},l.values=z,N.prototype={constructor:N,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(S),!n)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function r(r,o){return c.type="throw",c.arg=n,t.next=r,o&&(t.method="next",t.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=o.call(i,"catchLoc"),f=o.call(i,"finallyLoc");if(u&&f){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===n||"continue"===n)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=n,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(n,t){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&t&&(this.next=t),m},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.finallyLoc===n)return this.complete(e.completion,e.afterLoc),S(e),m}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var e=this.tryEntries[t];if(e.tryLoc===n){var r=e.completion;if("throw"===r.type){var o=r.arg;S(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,r){return this.delegate={iterator:z(n),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=e),m}}}function x(n,t,e,r){var o=t&&t.prototype instanceof j?t:j,a=Object.create(o.prototype),i=new N(r||[]);return a._invoke=function(n,t,e){var r=s;return function(o,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw a;return _()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var c=F(i,e);if(c){if(c===m)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===s)throw r=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=d;var u=w(n,t,e);if("normal"===u.type){if(r=e.done?p:h,u.arg===m)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(r=p,e.method="throw",e.arg=u.arg)}}}(n,e,i),a}function w(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(r){return{type:"throw",arg:r}}}function j(){}function O(){}function E(){}function k(n){["next","throw","return"].forEach(function(t){n[t]=function(n){return this._invoke(t,n)}})}function L(n){var t;this._invoke=function(e,r){function a(){return new Promise(function(t,a){!function t(e,r,a,i){var c=w(n[e],n,r);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"===typeof f&&o.call(f,"__await")?Promise.resolve(f.__await).then(function(n){t("next",n,a,i)},function(n){t("throw",n,a,i)}):Promise.resolve(f).then(function(n){u.value=n,a(u)},function(n){return t("throw",n,a,i)})}i(c.arg)}(e,r,t,a)})}return t=t?t.then(a,a):a()}}function F(n,t){var r=n.iterator[t.method];if(r===e){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=e,F(n,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=w(r,n.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,m;var a=o.arg;return a?a.done?(t[n.resultName]=a.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,m):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function P(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function S(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function N(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(P,this),this.reset(!0)}function z(n){if(n){var t=n[i];if(t)return t.call(n);if("function"===typeof n.next)return n;if(!isNaN(n.length)){var r=-1,a=function t(){for(;++r<n.length;)if(o.call(n,r))return t.value=n[r],t.done=!1,t;return t.value=e,t.done=!0,t};return a.next=a}}return{next:_}}function _(){return{value:e,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},267:function(n,t,e){"use strict";function r(n,t,e,r,o,a,i){try{var c=n[a](i),u=c.value}catch(f){return void e(f)}c.done?t(u):Promise.resolve(u).then(r,o)}function o(n){return function(){var t=this,e=arguments;return new Promise(function(o,a){var i=n.apply(t,e);function c(n){r(i,o,a,c,u,"next",n)}function u(n){r(i,o,a,c,u,"throw",n)}c(void 0)})}}e.d(t,"a",function(){return o})},360:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var r=e(221);function o(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},o=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(e).filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),o.forEach(function(t){Object(r.a)(n,t,e[t])})}return n}},58:function(n,t,e){"use strict";e.r(t),e.d(t,"Wrapper",function(){return f}),e.d(t,"Box",function(){return l});var r=e(20),o=e(1),a=e.n(o),i=e(21);function c(){var n=Object(r.a)(["\n  background-color: rgba(255, 255, 255, 0.85);\n  box-shadow: 0 0 5px rgba(255, 255, 255, 0.4);\n  padding: 20px;\n  width: 50%;\n  max-width: 480px;\n\n  h1 {\n    font-weight: 400;\n  }\n  h2 {\n    font-weight: 400;\n    text-transform: uppercase;\n  }\n"]);return c=function(){return n},n}function u(){var n=Object(r.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return u=function(){return n},n}var f=Object(i.c)("div")(u()),l=Object(i.c)("div")(c());t.default=function(n){return a.a.createElement(f,{style:n.style},a.a.createElement(l,null,a.a.createElement("h1",null,"404"),a.a.createElement("h2",null,"Page not found!")))}},584:function(n,t,e){"use strict";e.r(t);var r=e(360),o=e(264),a=e.n(o),i=e(267),c=e(76),u=e(77),f=e(47),l=e(78),s=e(48),h=e(20),d=e(1),p=e.n(d),m=e(387),g=e(592),v=e(10),b=e(13),y=e(21),x=e(58),w=e(11),j=e(232);function O(){var n=Object(h.a)(["\n  font-size: 1.5em;\n  margin: 15px auto;\n  color: #fff;\n  span {\n    background-color: #fff;\n    border: 2px solid #fff;\n    color: rgba(0, 0, 0, 0.85);\n  }\n"]);return O=function(){return n},n}function E(){var n=Object(h.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: center;\n"]);return E=function(){return n},n}function k(){var n=Object(h.a)(["\n  clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);\n  max-height: ",";\n  height: 100%;\n  width: ",";\n  background-image: ",";\n  background-position: center center;\n  background-size: 100% 100%;\n  background-repeat: no-repeat;\n  transition: background-size 150ms ease;\n  &:hover {\n    background-size: 120% 120%;\n  }\n"]);return k=function(){return n},n}function L(){var n=Object(h.a)(["\n  font-size: 1.2em;\n  text-transform: uppercase;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n\n  span {\n    font-weight: 300;\n    font-size: 1.1em;\n    margin: 0 5px;\n  }\n"]);return L=function(){return n},n}function F(){var n=Object(h.a)(["\n  &&& {\n    justify-content: space-between;\n  }\n"]);return F=function(){return n},n}var P=Object(y.a)(F()),S=Object(y.c)("div")(L()),N=Object(y.c)("div")(k(),function(n){return n["data-size"]},function(n){return n["data-size"]},function(n){return"url(".concat(n["data-bg"],")")}),z=Object(y.c)("div")(E()),_=Object(y.c)("div")(O()),R=function(n){function t(){var n,e;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return(e=Object(f.a)(this,(n=Object(l.a)(t)).call.apply(n,[this].concat(o)))).state={offer:"loading",qr:null},e.wheel=p.a.createRef(),e.dict={perc:"Percentage Off",special:"Special Offer",bulk:"Bulk Discount"},e.getCode=function(){var n=Object(i.a)(a.a.mark(function n(t,r){var o,i;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/codes/".concat(t,"/").concat(r),{credentials:"include"});case 2:if(401!==(o=n.sent).status){n.next=5;break}throw new Error("login");case 5:return n.next=7,o.json();case 7:return(i=n.sent).ok||e.setState({offer:!1}),n.abrupt("return",i.data);case 10:case"end":return n.stop()}},n,this)}));return function(t,e){return n.apply(this,arguments)}}(),e.download=function(n){var t=document.createElement("a");t.href=e.state.qr,t.download="qrcode-".concat(Date.now(),".png"),t.click()},e.showData=function(n){return g.a.info({title:p.a.createElement(p.a.Fragment,null,p.a.createElement("div",null,"You have won ",n.win.text," discount!"),p.a.createElement("div",null,"Here is your chomok code!")),className:j.g,content:p.a.createElement(p.a.Fragment,null,p.a.createElement("div",null,"Please show this QR code to the restaurant."),p.a.createElement(m.a,{text:"chomok://"+n.code,onClick:e.download,onGenerate:e.saveQr,alt:n.code}),p.a.createElement("div",null,p.a.createElement("em",null,"Click on the QR code to save for later")),p.a.createElement("p",null,"You can also show the following code"),p.a.createElement("pre",null,n.code),p.a.createElement("h3",null,"Type: ",e.dict[n.offertype])),okButtonProps:{onMouseDown:function(n){e.download(n),Object(b.e)("/")}},okText:"SAVE!"})},e.saveQr=function(n){return e.setState({qr:n})},e}return Object(s.a)(t,n),Object(u.a)(t,[{key:"render",value:function(){var n=this.props,t=n.zone,e=n.style,r=this.state.offer;return r?"loading"===r?p.a.createElement(w.a,null):p.a.createElement(p.a.Fragment,null,p.a.createElement(j.f,{dark:!0,style:e,className:P},p.a.createElement(S,null,p.a.createElement(v.a,{type:"environment"}),p.a.createElement("span",null,t)),p.a.createElement(N,{"data-bg":r.image,"data-size":"45vmin",className:"hex-img"}),p.a.createElement(_,null,"Spin the ",p.a.createElement("span",null,"WHEEL")," to get your ",p.a.createElement("span",null,"OFFER!")),p.a.createElement("div",{className:"descr"},p.a.createElement("div",null,r.partner.name),p.a.createElement("div",null,p.a.createElement(v.a,{type:"compass"})," ",r.partner.address))),p.a.createElement(j.f,{style:e},p.a.createElement(z,null,p.a.createElement("svg",{ref:this.wheel})))):p.a.createElement(x.Wrapper,{style:e},p.a.createElement(x.Box,null,p.a.createElement("h1",null,"No offer found!")))}},{key:"componentDidMount",value:function(){var n=Object(i.a)(a.a.mark(function n(){var t,e,o,i,c,u,f,l,s=this;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=this.props,e=t.type,o=t.zone,n.next=4,fetch("/api/offers/dhaka/".concat(o)).then(function(n){return n.json()});case 4:if((i=n.sent).ok){n.next=7;break}return n.abrupt("return",this.setState({offer:!1}));case 7:return this.setState({offer:i.data}),n.next=10,this.getCode(i.data._id,e);case 10:c=n.sent,u=this.state.offer.offers,f=["#C600D1","#45C2EE","#80EA52","#444652","#F4343F","#FF9000","#FFF639"],l=.2*Math.max(window.innerHeight,window.innerWidth)|0,window.wheel({el:this.wheel.current,data:u[e].values.filter(function(n){return null!==n}).map(function(n,t){return{text:n,chance:t===c.value?100:1,color:f[t%f.length]}}),clockwise:!1,limit:1,mode:"online",color:{border:"#f5f5f5",prize:"#f5f5f5",button:"#f5f5f5",line:"transparent",prizeFont:"#fff",buttonFont:"#111"},duration:3e3,buttonWidth:.25*l,buttonText:"SPIN!",radius:l,url:"/api/codes/".concat(c.code),onSuccess:function(n){return s.showData(Object(r.a)({},c,{win:n}))}}),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(0),"login"===n.t0.message&&Object(b.e)("/login"),console.error(n.t0.stack);case 21:case"end":return n.stop()}},n,this,[[0,17]])}));return function(){return n.apply(this,arguments)}}()}]),t}(p.a.PureComponent);t.default=R}}]);
//# sourceMappingURL=27.98eddf55.chunk.js.map