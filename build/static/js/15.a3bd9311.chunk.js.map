{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread.js","pages/_admin/AddAdmin.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__webpack_require__","d","__webpack_exports__","_objectSpread","_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","i","arguments","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","FormItem","Form","Item","AddAdmin","state","progress","handleSubmit","e","preventDefault","_this","setState","props","form","validateFieldsAndScroll","err","values","body","JSON","stringify","_ldata_my_projects_chomok_client_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","admin","fetch","credentials","method","headers","Content-Type","then","r","status","navigate","json","rep","ok","catch","console","error","getFieldDecorator","this","react__WEBPACK_IMPORTED_MODULE_7___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_8__","onSubmit","rules","required","message","antd__WEBPACK_IMPORTED_MODULE_9__","placeholder","type","antd__WEBPACK_IMPORTED_MODULE_10__","htmlType","antd__WEBPACK_IMPORTED_MODULE_11__","PureComponent","ControlledAddAdmin","create"],"mappings":"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","file":"static/js/15.a3bd9311.chunk.js","sourcesContent":["export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","import PropTypes from 'prop-types'\nimport { navigate } from '@reach/router'\nimport React, { PureComponent } from 'react'\nimport { Form, Button, Input, Icon } from 'antd'\n\nconst FormItem = Form.Item\n\nclass AddAdmin extends PureComponent {\n  state = {\n    progress: 'plus'\n  }\n\n  handleSubmit = e => {\n    e.preventDefault()\n    this.setState({ progress: 'loading' })\n    this.props.form.validateFieldsAndScroll((err, values) => {\n      if (err) return this.setState({ progress: 'close' })\n      const body = JSON.stringify({ ...values, admin: true })\n      fetch('/api/register', {\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body\n      })\n        .then(r => {\n          if (r.status === 401) navigate('/login')\n          return r.json()\n        })\n        .then(rep => {\n          if (rep.ok) {\n            this.setState({ progress: 'check' })\n            navigate('/admin/admins')\n          } else throw rep\n        })\n        .catch(e => {\n          this.setState({ progress: 'close' })\n          console.error(e)\n        })\n    })\n  }\n\n  render () {\n    const { getFieldDecorator } = this.props.form\n\n    return (\n      <Form onSubmit={this.handleSubmit}>\n        <FormItem>\n          {getFieldDecorator('name', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the full name!'\n              }\n            ]\n          })(<Input placeholder='Full name' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('phone', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the phone number!'\n              }\n            ]\n          })(<Input placeholder='Phone number' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('username', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the username!'\n              }\n            ]\n          })(<Input placeholder='Username' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('password', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the password!'\n              }\n            ]\n          })(<Input placeholder='Password' type='password' />)}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('email', {\n            rules: [\n              {\n                required: true,\n                message: 'Please enter the email!'\n              }\n            ]\n          })(<Input placeholder='E-mail' type='email' />)}\n        </FormItem>\n        <FormItem>\n          <Button\n            type={this.state.progress === 'close' ? 'danger' : 'primary'}\n            htmlType='submit'>\n            <Icon type={this.state.progress} />\n          </Button>\n        </FormItem>\n      </Form>\n    )\n  }\n\n  static propTypes = {\n    form: PropTypes.object\n  }\n}\n\nconst ControlledAddAdmin = Form.create()(AddAdmin)\n\nexport default ControlledAddAdmin\n"],"sourceRoot":""}