(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{444:function(e,t,r){"use strict";r.r(t);var n=r(78),a=r(79),s=r(81),o=r(80),i=r(82),l=r(21),c=r(1),u=r.n(c),p=r(446),d=r(425),m=r(10),f=r(14),h=r(11),g=r(22);function y(){var e=Object(l.a)(["\n  background-color: rgba(55, 55, 55, 0.85);\n  box-shadow: 0 0 5px rgba(55, 55, 55, 0.85);\n  border-radius: 5px;\n  padding: 24px;\n  width: 100%;\n  max-width: 360px;\n  min-height: 240px;\n  color: #fff;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: stretch;\n"]);return y=function(){return e},e}function b(){var e=Object(l.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return b=function(){return e},e}var w=Object(g.c)("div")(b()),E=Object(g.a)(y()),x=function(e){function t(){var e,r;Object(n.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(r=Object(s.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(i)))).state={username:"",password:"",progress:"lock"},r.prefixStyle={color:"rgba(0, 0, 0, 0.25)"},r.handleErr=function(e){console.error(e),r.setState({progress:"close"}),setTimeout(function(){r.setState({progress:"lock"})},1500)},r.doLogin=function(e){e.preventDefault(),r.props.form.validateFields(function(e,t){if(e)return r.handleErr(e);r.setState({progress:"loading"});var n=t.username,a=t.password,s=n.toLowerCase();fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:s,password:a})}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error("Unauthorized");r.setState({progress:"check"}),setTimeout(function(){Object(h.e)("/")},500)}).catch(r.handleErr)})},r}return Object(i.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return u.a.createElement(w,{style:this.props.style},u.a.createElement(p.a,{onSubmit:this.doLogin,className:E},u.a.createElement("strong",null,"Please log in"),u.a.createElement(p.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(u.a.createElement(d.a,{prefix:u.a.createElement(m.a,{type:"user",style:this.prefixStyle}),placeholder:"Username"}))),u.a.createElement(p.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(u.a.createElement(d.a,{prefix:u.a.createElement(m.a,{type:"lock",style:this.prefixStyle}),type:"password",placeholder:"Password"}))),u.a.createElement(f.a.Group,null,u.a.createElement(f.a,{type:"close"===this.state.progress?"danger":"primary",htmlType:"submit"},u.a.createElement(m.a,{type:this.state.progress})," Login"),u.a.createElement(f.a,{type:"default",href:"/register"},"Register ",u.a.createElement(m.a,{type:"user-add"})))))}}]),t}(u.a.PureComponent);t.default=p.a.create()(x)}}]);
//# sourceMappingURL=27.3cabd8ab.chunk.js.map