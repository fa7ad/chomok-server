(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{342:function(e,t,n){"use strict";n.r(t);var a=n(69),r=n(70),l=n(72),i=n(71),s=n(73),o=n(1),c=n.n(o),u=n(215),f=n.n(u),m=n(253),h=n(13),p=n(337),d=n(77),g=n(2),E=n.n(g),y=n(7),v=n.n(y),b=n(4),w=n.n(b),O=n(8),I=n.n(O),S=n(3),x=n.n(S),j=n(5),k=n.n(j),D=n(6),C=n(10),M=n(9),z=n.n(M),Y=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},N=function(e){function t(e){w()(this,t);var n=x()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setScale=function(){var e=n.avatarChildren;if(e){var t=e.offsetWidth,a=D.findDOMNode(n).getBoundingClientRect().width;a-8<t?n.setState({scale:(a-8)/t}):n.setState({scale:1})}},n.handleImgLoadError=function(){var e=n.props.onError;!1!==(e?e():void 0)&&n.setState({isImgExist:!1})},n.state={scale:1,isImgExist:!0},n}return k()(t,e),I()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.prefixCls,l=a.shape,i=a.size,s=a.src,c=a.icon,u=a.className,f=a.alt,m=Y(a,["prefixCls","shape","size","src","icon","className","alt"]),h=this.state,p=h.isImgExist,d=h.scale,g=z()((e={},v()(e,r+"-lg","large"===i),v()(e,r+"-sm","small"===i),e)),y=z()(r,u,g,(t={},v()(t,r+"-"+l,l),v()(t,r+"-image",s&&p),v()(t,r+"-icon",c),t)),b="number"===typeof i?{width:i,height:i,lineHeight:i+"px",fontSize:c?i/2:18}:{},w=this.props.children;if(s&&p)w=o.createElement("img",{src:s,onError:this.handleImgLoadError,alt:f});else if(c)w=o.createElement(C.a,{type:c});else{var O=this.avatarChildren;if(O||1!==d){var I={msTransform:"scale("+d+")",WebkitTransform:"scale("+d+")",transform:"scale("+d+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(O.offsetWidth/2)+"px)"},S="number"===typeof i?{lineHeight:i+"px"}:{};w=o.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e},style:E()({},S,I)},w)}else w=o.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e}},w)}return o.createElement("span",E()({},m,{style:E()({},b,m.style),className:y}),w)}}]),t}(o.Component),P=N;N.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"};var T=n(328),B=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={offers:[],loading:!0},n.listStyle={textAlign:"left"},n.listMapper=function(e,t){return c.a.createElement(p.a.Item,{actions:[c.a.createElement(d.a,{onClick:n.deleteItem(e._id,t),type:"danger"},"DELETE!")]},c.a.createElement(p.a.Item.Meta,{avatar:c.a.createElement(P,{src:e.image,size:"large",shape:"square"}),title:n.getItemTitle(e),description:n.getItemDesc(e),style:n.listStyle}))},n.getItemTitle=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{color:"red"},c.a.createElement("b",null,"Name:")," ",e.partner.name),c.a.createElement(T.a,{color:"orange"},c.a.createElement("b",null,"Zone:")," ",Object(m.c)(e.zone.division+" > "+e.zone.name)))},n.getItemDesc=function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(T.a,{color:"magenta"},c.a.createElement("b",null,"Date: ")," ",f()(e.date,"YYYYMMDD").format("DD-MM-YYYY")),c.a.createElement(T.a,{color:"blue"},c.a.createElement("b",null,"Request:")," ",e.reqBy.length),c.a.createElement(T.a,{color:"green"},c.a.createElement("b",null,"Used:")," ",e.useBy.length),c.a.createElement(T.a,{color:"pink"},c.a.createElement("b",null,"Unused:")," ",e.reqBy.length-e.useBy.length))},n.deleteItem=function(e,t){return function(a){fetch("/api/offers/"+e,{method:"DELETE",credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error("Something went wrong");n.setState(function(e){var n=e.offers.slice();return n.splice(t,1),{offers:n}})}).catch(function(e){console.error(e)})}},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(p.a,{loading:this.state.loading,itemLayout:"horizontal",dataSource:this.state.offers,renderItem:this.listMapper})}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/offers",{credentials:"include"}).then(function(e){return 401===e.status&&Object(h.e)("/login"),e.json()}).then(function(t){var n=t.ok,a=t.data;if(!n)throw new Error("Something went wrong");e.setState({offers:a,loading:!1})}).catch(function(e){console.error(e)})}}]),t}(c.a.PureComponent);t.default=B}}]);
//# sourceMappingURL=8.20bd1d3a.chunk.js.map