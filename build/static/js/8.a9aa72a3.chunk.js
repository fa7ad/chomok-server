(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{323:function(e,t,n){"use strict";n.r(t);var a=n(221),r=n(76),i=n(77),s=n(79),l=n(78),o=n(80),c=n(1),u=n.n(c),f=n(317),m=n(83),h=n(2),p=n.n(h),d=n(7),g=n.n(d),E=n(4),v=n.n(E),y=n(8),b=n.n(y),w=n(3),O=n.n(w),I=n(5),S=n.n(I),x=n(6),j=n(15),k=n(9),C=n.n(k),D=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&(n[a[r]]=e[a[r]])}return n},z=function(e){function t(e){v()(this,t);var n=O()(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setScale=function(){var e=n.avatarChildren;if(e){var t=e.offsetWidth,a=x.findDOMNode(n).getBoundingClientRect().width;a-8<t?n.setState({scale:(a-8)/t}):n.setState({scale:1})}},n.handleImgLoadError=function(){var e=n.props.onError;!1!==(e?e():void 0)&&n.setState({isImgExist:!1})},n.state={scale:1,isImgExist:!0},n}return S()(t,e),b()(t,[{key:"componentDidMount",value:function(){this.setScale()}},{key:"componentDidUpdate",value:function(e,t){(e.children!==this.props.children||t.scale!==this.state.scale&&1===this.state.scale||t.isImgExist!==this.state.isImgExist)&&this.setScale()}},{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.prefixCls,i=a.shape,s=a.size,l=a.src,o=a.icon,u=a.className,f=a.alt,m=D(a,["prefixCls","shape","size","src","icon","className","alt"]),h=this.state,d=h.isImgExist,E=h.scale,v=C()((e={},g()(e,r+"-lg","large"===s),g()(e,r+"-sm","small"===s),e)),y=C()(r,u,v,(t={},g()(t,r+"-"+i,i),g()(t,r+"-image",l&&d),g()(t,r+"-icon",o),t)),b="number"===typeof s?{width:s,height:s,lineHeight:s+"px",fontSize:o?s/2:18}:{},w=this.props.children;if(l&&d)w=c.createElement("img",{src:l,onError:this.handleImgLoadError,alt:f});else if(o)w=c.createElement(j.a,{type:o});else{var O=this.avatarChildren;if(O||1!==E){var I={msTransform:"scale("+E+")",WebkitTransform:"scale("+E+")",transform:"scale("+E+")",position:"absolute",display:"inline-block",left:"calc(50% - "+Math.round(O.offsetWidth/2)+"px)"},S="number"===typeof s?{lineHeight:s+"px"}:{};w=c.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e},style:p()({},S,I)},w)}else w=c.createElement("span",{className:r+"-string",ref:function(e){return n.avatarChildren=e}},w)}return c.createElement("span",p()({},m,{style:p()({},b,m.style),className:y}),w)}}]),t}(c.Component),M=z;z.defaultProps={prefixCls:"ant-avatar",shape:"circle",size:"default"};var N=n(322),P=n(12),T=function(e){function t(){var e,n;Object(r.a)(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={offers:[],loading:!0},n.listStyle={textAlign:"left"},n.listMapper=function(e,t){return u.a.createElement(f.a.Item,{actions:[u.a.createElement(m.a,{onClick:n.deleteItem(e._id,t),type:"danger"},"DELETE!")]},u.a.createElement(f.a.Item.Meta,{avatar:u.a.createElement(M,{src:e.image,size:"large",shape:"square"}),title:n.getItemTitle(e),description:n.getItemDesc(e),style:n.listStyle}))},n.getItemTitle=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(N.a,{color:"red"},u.a.createElement("b",null,"Name:")," ",e.partner.name),u.a.createElement(N.a,{color:"orange"},u.a.createElement("b",null,"Zone:")," ",e.zone.division+"/"+e.zone.name))},n.getItemDesc=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement(N.a,{color:"magenta"},u.a.createElement("b",null,"Date: ")," ",e.date),u.a.createElement(N.a,{color:"blue"},u.a.createElement("b",null,"Request:")," ",e.reqBy.length),u.a.createElement(N.a,{color:"green"},u.a.createElement("b",null,"Used:")," ",e.useBy.length))},n.deleteItem=function(e,t){return function(r){fetch("/api/offers/"+e,{method:"DELETE",credentials:"include"}).then(function(e){return e.json()}).then(function(e){if(!e.ok)throw new Error("Something went wrong");n.setState(function(e){var r=Object(a.a)({},n.state);return r.offers.splice(t,1),r})}).catch(function(e){console.error(e)})}},n}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.a.createElement(f.a,{loading:this.state.loading,itemLayout:"horizontal",dataSource:this.state.offers,renderItem:this.listMapper})}},{key:"componentDidMount",value:function(){var e=this;fetch("/api/offers",{credentials:"include"}).then(function(e){return 401===e.status&&Object(P.e)("/login"),e.json()}).then(function(t){var n=t.ok,a=t.data;if(!n)throw new Error("Something went wrong");e.setState({offers:a,loading:!1})}).catch(function(e){console.error(e)})}}]),t}(u.a.PureComponent);t.default=T}}]);
//# sourceMappingURL=8.a9aa72a3.chunk.js.map