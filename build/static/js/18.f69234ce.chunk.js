(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{362:function(e,t,a){"use strict";a.r(t);var n=a(77),c=a(78),r=a(80),o=a(79),l=a(81),i=a(49),s=a(331),h=a.n(s),d=a(11),u=a(1),g=a.n(u),p=function(e){function t(){var e,a;Object(n.a)(this,t);for(var c=arguments.length,l=new Array(c),i=0;i<c;i++)l[i]=arguments[i];return(a=Object(r.a)(this,(e=Object(o.a)(t)).call.apply(e,[this].concat(l)))).state={delay:300,correct:!1,legacyMode:!1,percentage:null},a.qr=g.a.createRef(),a.handleScan=function(e){e&&e.startsWith("chomok://")&&fetch("/api/codes/"+e.replace("chomok://",""),{method:"POST",credentials:"include"}).then(function(e){return 401===e.status?Object(d.e)("/login"):e.json()}).then(function(e){if(!e.ok)throw new Error("Invalid");a.setState({correct:!0,percentage:e.data.percentage+" %"})}).catch(function(e){a.setState({correct:!1})})},a.handleError=function(e){a.setState({legacyMode:!0})},a.openImageDialog=function(e){a.qr.current.openImageDialog()},a.handleUpload=function(e){console.log(e)},a}return Object(l.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return g.a.createElement("div",null,g.a.createElement(h.a,{ref:this.qr,delay:this.state.delay,style:{width:"50%",margin:"0 auto"},onError:this.handleError,onScan:this.handleScan,legacyMode:this.state.legacyMode,onImageLoad:this.handleUpload}),g.a.createElement(i.a,{onClick:this.openImageDialog},"Submit QR"),g.a.createElement("h1",{style:{color:this.state.correct?"green":"black"}},this.state.percentage&&"Value: "+this.state.percentage))}}]),t}(u.PureComponent);t.default=p}}]);
//# sourceMappingURL=18.f69234ce.chunk.js.map