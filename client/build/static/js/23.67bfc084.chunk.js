(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{442:function(e,t,n){"use strict";n.r(t);var a=n(78),r=n(79),l=n(81),c=n(80),o=n(82),i=n(21),u=n(1),s=n.n(u),h=n(22),d=n(426),m=n(14),f=n(403),p=n.n(f),g=n(11);function E(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  > div {\n    margin-top: 20px;\n    margin-bottom: 20px;\n  }\n  .result pre {\n    font-size: 16px;\n    color: #111;\n    text-align: left;\n  }\n"]);return E=function(){return e},e}var v=Object(h.c)("div")(E()),y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(o)))).state={delay:300,legacy:!1,result:!1,manual:""},n.qr=s.a.createRef(),n.handleScan=function(e){e&&e.startsWith("chomok://")?fetch("/api/codes/"+e.replace("chomok://",""),{method:"POST",credentials:"include"}).then(function(e){if(403===e.status||401===e.status)throw Object(g.e)("/login"),new Error("Unauthorized");return e.json()}).then(function(e){if(!e.ok)throw new Error("Invalid code");n.setState({result:e.data})}).catch(function(e){n.setState({result:!1})}):n.setState({result:!1})},n.openImageDialog=function(e){n.qr.current.openImageDialog()},n.handleError=function(){n.setState({legacy:!0})},n.manualInput=function(e){n.setState({manual:e.target.value})},n.checkManual=function(e){n.handleScan("chomok://"+n.state.manual)},n}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return s.a.createElement(v,null,s.a.createElement("div",{className:"result"},s.a.createElement("h3",null,"Result:"),s.a.createElement("pre",null,this.state.result?JSON.stringify(this.state.result,null,4):"No valid QR found...")),s.a.createElement("div",null,s.a.createElement("h3",null,"Manual Entry"),s.a.createElement(d.a,{placeholder:"Offer code",onChange:this.manualInput}),s.a.createElement(m.a,{onClick:this.checkManual},"Check")),s.a.createElement("div",null,s.a.createElement(p.a,{ref:this.qr,delay:this.state.delay,style:{width:"90%",maxWidth:"480px",margin:"0 auto"},onError:this.handleError,onScan:this.handleScan,legacyMode:this.state.legacy}),s.a.createElement(m.a,{onClick:this.openImageDialog},"Submit Image QR")))}}]),t}(s.a.PureComponent);t.default=y}}]);
//# sourceMappingURL=23.67bfc084.chunk.js.map