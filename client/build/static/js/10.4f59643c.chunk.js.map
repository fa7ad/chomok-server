{"version":3,"sources":["pages/_admin/Zones.js"],"names":["AdminZones","state","zones","loading","listStyle","textAlign","listMapper","item","idx","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","antd__WEBPACK_IMPORTED_MODULE_6__","Item","actions","antd__WEBPACK_IMPORTED_MODULE_7__","onClick","_this","deleteItem","_id","type","Meta","title","getItemTitle","description","getItemDesc","style","antd__WEBPACK_IMPORTED_MODULE_8__","color","name","division","id","e","fetch","method","credentials","then","res","json","_ref","ok","Error","setState","p","slice","splice","catch","console","error","this","itemLayout","dataSource","renderItem","_this2","r","status","navigate","_ref2","data","React","PureComponent"],"mappings":"gMAIMA,6MACJC,MAAQ,CACNC,MAAO,GACPC,SAAS,KAGXC,UAAY,CACVC,UAAW,UA6BbC,WAAa,SAACC,EAAMC,GAAP,OACXC,EAAAC,EAAAC,cAACC,EAAA,EAAKC,KAAN,CACEC,QAAS,CACPL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAQC,QAASC,EAAKC,WAAWX,EAAKY,IAAKX,GAAMY,KAAK,UAAtD,aAIFX,EAAAC,EAAAC,cAACC,EAAA,EAAKC,KAAKQ,KAAX,CACEC,MAAOL,EAAKM,aAAahB,GACzBiB,YAAaP,EAAKQ,YAAYlB,GAC9BmB,MAAOT,EAAKb,gBAKlBmB,aAAe,SAAAhB,GAAI,OACjBE,EAAAC,EAAAC,cAACgB,EAAA,EAAD,CAAKC,MAAM,OACTnB,EAAAC,EAAAC,cAAA,kBADF,IACgBJ,EAAKsB,SAIvBJ,YAAc,SAAAlB,GAAI,OAChBE,EAAAC,EAAAC,cAACgB,EAAA,EAAD,CAAKC,MAAM,QACTnB,EAAAC,EAAAC,cAAA,sBADF,IACoBJ,EAAKuB,aAI3BZ,WAAa,SAACa,EAAIvB,GAAL,OAAa,SAAAwB,GACxBC,MAAM,cAAgBF,EAAI,CACxBG,OAAQ,SACRC,YAAa,YAEZC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAG,GACJ,IADgBA,EAATC,GAQL,MAAM,IAAIC,MAAM,wBANhBxB,EAAKyB,SAAS,SAAAC,GACZ,IAAMzC,EAAQyC,EAAEzC,MAAM0C,QAEtB,OADA1C,EAAM2C,OAAOrC,EAAK,GACX,CAAEN,aAMd4C,MAAM,SAAAd,GACLe,QAAQC,MAAMhB,+EAtElB,OACEvB,EAAAC,EAAAC,cAACC,EAAA,EAAD,CACET,QAAS8C,KAAKhD,MAAME,QACpB+C,WAAW,aACXC,WAAYF,KAAKhD,MAAMC,MACvBkD,WAAYH,KAAK3C,yDAKF,IAAA+C,EAAAJ,KACnBhB,MAAM,aAAc,CAAEE,YAAa,YAChCC,KAAK,SAAAkB,GAEJ,OADiB,MAAbA,EAAEC,QAAgBC,YAAS,UACxBF,EAAEhB,SAEVF,KAAK,SAAAqB,GAAyB,IAAtBjB,EAAsBiB,EAAtBjB,GAAUtC,EAAYuD,EAAlBC,KACX,IAAKlB,EAAI,MAAM,IAAIC,MAAM,wBACzBY,EAAKX,SAAS,CAAExC,QAAOC,SAAS,MAEjC2C,MAAM,SAAAd,GACLe,QAAQC,MAAMhB,YAhCG2B,IAAMC,eAsFhB5D","file":"static/js/10.4f59643c.chunk.js","sourcesContent":["import React from 'react'\nimport { List, Button, Tag } from 'antd'\nimport { navigate } from '@reach/router'\n\nclass AdminZones extends React.PureComponent {\n  state = {\n    zones: [],\n    loading: true\n  }\n\n  listStyle = {\n    textAlign: 'left'\n  }\n\n  render () {\n    return (\n      <List\n        loading={this.state.loading}\n        itemLayout='horizontal'\n        dataSource={this.state.zones}\n        renderItem={this.listMapper}\n      />\n    )\n  }\n\n  componentDidMount () {\n    fetch('/api/zones', { credentials: 'include' })\n      .then(r => {\n        if (r.status === 401) navigate('/login')\n        return r.json()\n      })\n      .then(({ ok, data: zones }) => {\n        if (!ok) throw new Error('Something went wrong')\n        this.setState({ zones, loading: false })\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n\n  listMapper = (item, idx) => (\n    <List.Item\n      actions={[\n        <Button onClick={this.deleteItem(item._id, idx)} type='danger'>\n          DELETE!\n        </Button>\n      ]}>\n      <List.Item.Meta\n        title={this.getItemTitle(item)}\n        description={this.getItemDesc(item)}\n        style={this.listStyle}\n      />\n    </List.Item>\n  )\n\n  getItemTitle = item => (\n    <Tag color='red'>\n      <b>Name:</b> {item.name}\n    </Tag>\n  )\n\n  getItemDesc = item => (\n    <Tag color='blue'>\n      <b>Division:</b> {item.division}\n    </Tag>\n  )\n\n  deleteItem = (id, idx) => e => {\n    fetch('/api/zones/' + id, {\n      method: 'DELETE',\n      credentials: 'include'\n    })\n      .then(res => res.json())\n      .then(({ ok }) => {\n        if (ok) {\n          this.setState(p => {\n            const zones = p.zones.slice()\n            zones.splice(idx, 1)\n            return { zones }\n          })\n        } else {\n          throw new Error('Something went wrong')\n        }\n      })\n      .catch(e => {\n        console.error(e)\n      })\n  }\n}\n\nexport default AdminZones\n"],"sourceRoot":""}