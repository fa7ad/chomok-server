(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{561:function(e,n,t){"use strict";t.r(n);var a=t(76),l=t(77),r=t(79),c=t(78),o=t(80),i=t(20),u=t(1),d=t.n(u),s=t(21),h=t(13),f=t(568),m=t(544),p=t(83),v=t(427),w=t.n(v);function E(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  > div {\n    margin-top: 20px;\n    margin-bottom: 20px;\n  }\n  .result pre {\n    font-size: 16px;\n    color: #111;\n    text-align: left;\n  }\n"]);return E=function(){return e},e}var O=Object(s.c)("div")(E());var b=function(e){function n(){var e,t;Object(a.a)(this,n);for(var l=arguments.length,o=new Array(l),i=0;i<l;i++)o[i]=arguments[i];return(t=Object(r.a)(this,(e=Object(c.a)(n)).call.apply(e,[this].concat(o)))).state={manual:""},t.handleScan=function(e){e.result&&fetch("/api/codes/".concat(e.result.replace("chomok://","")),{method:"POST",credentials:"include"}).then(function(e){if(403===e.status||401===e.status)throw Object(h.e)("/login"),new Error("Unauthorized");return e.json()}).then(function(e){if(!e.ok)throw new Error("Invalid code");var n;n=e.data,f.a.info({title:"Valid code found!",content:d.a.createElement(d.a.Fragment,null,d.a.createElement("h1",null,"Value: ",n.value),d.a.createElement("h3",null,"Type: ",{perc:"Percentage Off",special:"Special Offer",bulk:"Bulk Discount"}[n.offertype]),d.a.createElement("h3",null,"Validity: ",n.validity)),onOk:function(e){return window.location.reload()}})}).catch(function(e){console.error(e)})},t.manualInput=function(e){t.setState({manual:e.target.value})},t.checkManual=function(e){t.handleScan(t.state.manual)},t}return Object(o.a)(n,e),Object(l.a)(n,[{key:"render",value:function(){var e=Math.min(300,.75*window.innerWidth|0);return d.a.createElement(O,null,d.a.createElement("div",{className:"result"},d.a.createElement("pre",null,"No valid QR found...")),d.a.createElement("div",null,d.a.createElement("h3",null,"Manual Entry"),d.a.createElement(m.a,{placeholder:"Offer code",onChange:this.manualInput}),d.a.createElement(p.a,{onClick:this.checkManual},"Check")),d.a.createElement("div",null,d.a.createElement(w.a,{onQrCodeScanned:this.handleScan,width:e,height:e,showAimAssist:!1})))}}]),n}(d.a.PureComponent);n.default=b}}]);
//# sourceMappingURL=24.6ab4ec73.chunk.js.map