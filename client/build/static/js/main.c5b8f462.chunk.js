(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{109:function(e,n,t){e.exports=t.p+"static/media/logo.d7374ff8.png"},130:function(e,n,t){e.exports=t(214)},137:function(e,n,t){},139:function(e,n,t){},214:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),o=t(6),i=t.n(o),l=(t(135),t(137),t(139),t(47)),c=t(48),u=t(50),d=t(49),s=t(51),m=t(13),f=t(343),g=t(344),h=t(10),p=t(116),b=t.n(p),E=t(21),v=t(22);function O(){var e=Object(E.a)(["\n  width: 80px;\n  position: absolute;\n  cursor: pointer;\n  top: 2px;\n  left: calc(50% - 35px);\n  z-index: 2;\n\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.25);\n  border-radius: 50%;\n\n  transition: transform 250ms ease;\n  &:hover {\n    transform: scale(1.05);\n  }\n"]);return O=function(){return e},e}var k=Object(v.c)("img")(O());function y(){var e=Object(E.a)(["\n  font-size: 24px;\n  position: absolute;\n  cursor: pointer;\n  top: 5px;\n  right: 5px;\n  z-index: 2;\n  display: block;\n\n  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.25));\n  transition: all 250ms ease;\n  padding: 5px;\n  border-radius: 50%;\n\n  &:hover {\n    filter: none;\n    background-color: #CC0058;\n  }\n"]);return y=function(){return e},e}var j=Object(v.c)(h.a)(y()),A=t(93),I=t(87),P=t(31),x=function(e){var n=e.children,t=Object(A.a)(e,["children"]);return r.a.createElement(m.b,{children:function(e){var a=e.location;return r.a.createElement(I.TransitionGroup,{className:"transition-group"},r.a.createElement(I.CSSTransition,{key:a.key,classNames:"fade",timeout:100},r.a.createElement(m.d,Object.assign({location:a,className:Object(P.cx)("router",{admin:/admin/.test(a.href)})},t),n)))}})},w=t(60),S=t.n(w),D=t(59),L=S.a.Map({loading:D.a,loader:{Home:function(){return t.e(6).then(t.bind(null,346))},navItems:function(){return fetch("/api/zones/").then(function(e){return e.json()})}},render:function(e,n){var t=e.Home.default,a=e.navItems.data;return r.a.createElement(t,Object.assign({},n,{navItems:a}))}}),C=S()({loading:D.a,loader:function(e){return t.e(7).then(t.bind(null,345))}});C.Offers=S()({loading:D.a,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(4),t.e(8)]).then(t.bind(null,347))}}),C.AddOffer=S()({loading:D.a,loader:function(e){return Promise.all([t.e(0),t.e(2),t.e(3),t.e(20),t.e(9)]).then(t.bind(null,331))}}),C.Zones=S()({loading:D.a,loader:function(e){return Promise.all([t.e(0),t.e(4),t.e(10)]).then(t.bind(null,332))}}),C.AddZone=S()({loading:D.a,loader:function(e){return Promise.all([t.e(1),t.e(2),t.e(11)]).then(t.bind(null,333))}}),C.Partners=S()({loading:D.a,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(4),t.e(12)]).then(t.bind(null,334))}}),C.AddPartner=S()({loading:D.a,loader:function(e){return Promise.all([t.e(2),t.e(13)]).then(t.bind(null,335))}}),C.Admins=S()({loading:D.a,loader:function(e){return Promise.all([t.e(0),t.e(1),t.e(3),t.e(4),t.e(14)]).then(t.bind(null,336))}}),C.AddAdmin=S()({loading:D.a,loader:function(e){return Promise.all([t.e(2),t.e(15)]).then(t.bind(null,337))}});var z=S()({loading:D.a,loader:function(e){return t.e(16).then(t.bind(null,338))}}),N=S()({loading:D.a,loader:function(e){return t.e(17).then(t.bind(null,85))}}),M=S()({loading:D.a,loader:function(e){return t.e(18).then(t.bind(null,339))}}),T=t(109),F=t.n(T),R=function(e){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(n)).call.apply(e,[this].concat(o)))).logout=function(e){fetch("/api/logout",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var n=e.ok;setTimeout(t.getLoginState,1e3),n&&window.location.reload()}).catch(function(e){return console.error(e)})},t.navigate=function(e){return function(n){Object(m.e)(e)}},t.menu=[r.a.createElement(f.a.Item,{key:"0",onClick:t.navigate("/login")},"Login"),r.a.createElement(f.a.Item,{key:"1",onClick:t.navigate("/admin")},"Settings"),r.a.createElement(f.a.Item,{key:"2",onClick:t.logout},"Logout")],t.state={loggedIn:!1,menuItems:t.menu.slice(0,1)},t.adminPages=[{key:"home",name:"HOME",icon:"home"},{key:"offers",name:"OFFERS",icon:"bars"},{key:"add-offer",name:"ADD OFFER",icon:"plus"},{key:"zones",name:"ZONES",icon:"environment"},{key:"add-zone",name:"ADD ZONE",icon:"plus"},{key:"partners",name:"PARTNERS",icon:"team"},{key:"add-partner",name:"ADD PARTNER",icon:"usergroup-add"},{key:"admins",name:"ADMINS",icon:"user"},{key:"add-admin",name:"ADD ADMIN",icon:"user-add"},{key:"logout",name:"LOGOUT",icon:"logout"}],t.getLoginState=function(){fetch("/api/loggedIn",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var n=e.ok?t.menu.slice(1):t.menu.slice(0,1);e.ok&&"admin"!==e.type&&n.splice(0,1),t.setState({loggedIn:e,menuItems:n})}).catch(function(e){console.error(e),t.setState({loggedIn:!1,menuItems:t.menu.slice(0,1)})})},t.getLogoAndUser=function(e){var n=e.location;return/login|admin/.test(n.href)?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{src:F.a,alt:"Chomok Logo",onClick:t.navigate("/")}),r.a.createElement(g.a,{overlay:r.a.createElement(f.a,{children:t.state.menuItems}),trigger:["click"]},r.a.createElement(j,{type:"user",onMouseOver:t.getLoginState})))},t.getBurgerMenu=function(e){var n=e.location;return/admin/.test(n.href)?null:r.a.createElement(b.a,{outerContainerId:"root",pageWrapId:"page"},r.a.createElement(m.a,{to:"/"},"Home"),r.a.createElement(m.a,{to:"/about"},"About Us"),r.a.createElement(m.a,{to:"/contact"},"Contact Us"))},t.adminPage=function(e){if(!t.state.loggedIn)return Object(m.e)("/login"),null;switch(e){case"home":return r.a.createElement(h.a,{type:"home"});case"offers":return r.a.createElement(C.Offers,null);case"add-offer":return r.a.createElement(C.AddOffer,null);case"zones":return r.a.createElement(C.Zones,null);case"add-zone":return r.a.createElement(C.AddZone,null);case"partners":return r.a.createElement(C.Partners,null);case"add-partner":return r.a.createElement(C.AddPartner,null);case"admins":return r.a.createElement(C.Admins,null);case"add-admin":return r.a.createElement(C.AddAdmin,null);case"logout":return fetch("/api/logout",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.ok&&Object(m.e)("/")}).catch(function(e){return console.error(e)}),"Logging you out...";default:return r.a.createElement("h1",null,"Invalid route xD")}},t}return Object(s.a)(n,e),Object(c.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.b,null,this.getBurgerMenu),r.a.createElement(m.b,null,this.getLogoAndUser),r.a.createElement(x,{id:"page"},r.a.createElement(L,{path:"/"}),r.a.createElement(z,{path:"/offer/:zone"}),r.a.createElement(m.c,{from:"/admin",path:"/admin",to:"/admin/home",noThrow:!0}),r.a.createElement(C,{path:"/admin/:page",pages:this.adminPages},this.adminPage),r.a.createElement(M,{path:"/login"}),r.a.createElement(N,{default:!0})))}},{key:"componentDidMount",value:function(){this.getLoginState(),setTimeout(this.getLoginState,900)}}]),n}(r.a.PureComponent);i.a.render(r.a.createElement(R,null),document.querySelector("#root"))},59:function(e,n,t){"use strict";var a=t(21),r=t(1),o=t.n(r),i=t(22),l=t(119),c=t.n(l);function u(){var e=Object(a.a)(["\n  filter: drop-shadow(0 0 5px #fff);\n"]);return u=function(){return e},e}function d(){var e=Object(a.a)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return d=function(){return e},e}var s=Object(i.c)("div")(d()),m=Object(i.c)(c.a)(u());n.a=function(e){return o.a.createElement(s,null,o.a.createElement(m,{size:50,color:"#111"}))}}},[[130,21,19]]]);
//# sourceMappingURL=main.c5b8f462.chunk.js.map